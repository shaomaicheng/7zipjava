define("zenjs/util/event",["require","jquery"],function(t){var i=t("jquery"),e={getTargetByDataKey:function(t,e){for(var s=i(t.target);!s.data(e)&&0!==s.data(e)&&"BODY"!=(s[0]||{}).nodeName;)s=s.parent();return s},getEventHandler:function(){var t=function(){};return i.extend(!0,t.prototype,e.methods),new t},methods:{events:{},on:function(t,i){return"string"==typeof t&&"[object Function]"===Object.prototype.toString.call(i)&&(this.events[t]||(this.events[t]=[]),this.events[t].push(i))},trigger:function(t){if("string"!=typeof t)return!1;if(!this.events[t])return this.events[t]=[],!1;for(var i=this.events[t],e=Array.prototype.slice.apply(arguments,[1]),s=0,n=i.length;s<n;s++)i[s](e)},off:function(t,i){if(!t&&!i)return void(this.events={});if(!i)return void(this.events[t]=[]);var e=this.events[t],s=e.indexOf(i);e.splice(s,1)}}};return e}),define("zenjs/backbone/tabber",["require","../util/event","backbone"],function(t){var i=t("../util/event"),e=t("backbone"),s=function(){};return e.View.extend({initialize:function(t){this.activeKey=t.activeKey||"type",this.activeClass=t.activeClass||"active",this.hashAsDefaultData=!!t.hashAsDefaultData,this.cbOnClicked=t.onClicked||s,this.cbOnDisabledClicked=t.onDisabledClicked||s,this.initDefault(t)},events:{click:"onClicked"},initDefault:function(t){var i=e.history.getHash();t.hashAsDefaultData&&i?this.active(i):t.defaultData&&t.defaultData.length>0&&this.active(t.defaultData)},onClicked:function(t){if(t.target&&0!==t.target.length){var e=i.getTargetByDataKey(t,this.activeKey),s=""+e.data(this.activeKey);if(void 0===this.firstClick?this.firstClick=!0:this.firstClick=!1,e.blur(),s&&"undefined"!==s&&this.activeData!==s&&s&&s.length>0){if(this.disabled===!0)return void(this.activeData!==s&&this.cbOnDisabledClicked());if(this.hashAsDefaultData){var n=location.href.replace(/(javascript:|#).*$/,"");location.replace(n+"#"+s)}this.$("."+this.activeClass).removeClass(this.activeClass),e.addClass(this.activeClass),this.activeData=s,this.cbOnClicked(_.extend(t||{},{value:s,nTarget:e}))}}},active:function(t,i){this.onClicked(_.extend({target:this.$el.find("[data-"+this.activeKey+'="'+t+'"]:first')},i||{}))},setDisable:function(t){this.disabled=t},setData:function(t){this.activeData=t,this.$("."+this.activeClass).removeClass(this.activeClass),this.$el.find("[data-"+this.activeKey+'="'+this.activeData+'"]:first').addClass(this.activeClass)},getData:function(){return this.activeData}})}),define("bower_components/waterfall/pager",["require","zenjs/events"],function(t){var i=t("zenjs/events"),e=function(){};return i.extend({init:function(t){this.$el||(this.$el=$(t.el||t.$el||"<div></div>"),this.el=this.$el[0]),this.nLoading=t.loadingHTML?$(t.loadingHTML).addClass("loading-more"):$('<div class="loading-more"><span></span></div>'),this.nList=this.$el.find(".js-list"),0===this.nList.length&&(this.nList=$('<div class="js-list b-list"></div>'),this.$el.append(this.nList)),"number"==typeof t.total&&(this.total=t.total),this.offset=t.offset||300,this.scrollDirection="down",this.pageIndex=t.pageIndex||0,this.perPage=t.perPage||10,this.postData=t.postData||{},this.checkSize=!0,"boolean"==typeof t.checkSize&&(this.checkSize=t.checkSize),this.idName=t.idName||"id",t.idValue&&(this.idValue=t.idValue),this.jsonKeys=t.jsonKeys||{},this.finishedHTML=t.finishedHTML,this.finishedText=t.finishedText,this.emptyHTML=t.emptyHTML||"",this.emptyText=t.emptyText||"",this.getExtrPostData=t.getExtrPostData||e,this.onFetchError=t.onFetchError||e,this.onListEmpty=this.onListEmpty||t.onEmpty||this._onListEmpty,this.on("finished",t.onFinished||e),this.on("after:list:load",t.onAfterListLoad||t.onDataLoad||e),this.extraData={},this.scrollContainer=t.scrollContainer?$(t.scrollContainer):$("body"),this.scrollEventAccepter=t.scrollEventAccepter?$(t.scrollEventAccepter):$(t.scrollContainer||window),this._onScroll=$.proxy(this.onScroll,this),this.bindScrollFunc()},$:function(t){return this.$el.find(t)},onScroll:function(){function t(){var t=this.nList.offset(),i=this.scrollContainer.offset();return{left:t.left-i.left||0,top:t.top-i.top||0}}return function(){if(!(this.sleeping||this.finished||this.fetching)){if(0===this.total||this.total&&this.total<=this.pageIndex*this.perPage)return void this.doFinishLoading();var i=t.call(this);"down"===this.scrollDirection&&this.nList.height()+i.top-this.scrollEventAccepter.height()-this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore(),"up"===this.scrollDirection&&this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore()}}}(),fetchMore:function(){return this.sleeping||this.finished||this.fetching?this:(this.showLoading(),this.fetching=!0,this._fetchMore&&this._fetchMore.call(this),this)},onFetchMoreSuccess:function(){this.hideLoading(),this.fetching=!1,this._onFetchMoreSuccess.apply(this,arguments)},fetchRender:function(){return this.fetchMore(),this},_onFetchMoreError:function(){this.fetching=!1,this.hideLoading(),this.onFetchError()},doFinishLoading:function(t){this.finished=!0,this.fetching=!1,this.hideLoading(),this.$el.find(".list-finished").remove(),this.triggerMethod&&this.triggerMethod("finished",this.collection,t)},bindScrollFunc:function(){var t=this;this.scrollFunc&&this.unbindScrollFunc(),this.scrollFunc=function(){t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.scrollTimeout=setTimeout(t._onScroll,200)},this.scrollEventAccepter.on("scroll",this.scrollFunc)},unbindScrollFunc:function(){this.scrollEventAccepter.off("scroll",this.scrollFunc),this.scrollFunc=null},doSleep:function(){this.sleeping=!0,this.unbindScrollFunc()},doWake:function(){this.sleeping=!1,this.bindScrollFunc(),this.fetchMore()},showLoading:function(){this.hasFetching=!0,this.$el.append(this.nLoading)},hideLoading:function(){this.nLoading.remove()},getFinishHtml:function(){return this.finishedHTML?$(this.finishedHTML).addClass("list-finished"):'<div class="list-finished">'+(this.finishedText||"已经没有更多了")+"</div>"},setExtraData:function(t){$.extend(this.extraData,t)},resetWaterfall:function(t){this.finished===!0&&this.$(".list-finished").remove(),this.removeAll&&this.removeAll(),this.nList.empty(),this.collection&&this.collection.reset([],{silent:!0}),this.listEl&&this.listEl.empty(),this.finished=!1,t&&t.pageIndex?this.pageIndex=t.pageIndex:this.pageIndex=0,this.idValue=void 0},_onListEmpty:function(){if(!this.fetching){var t;this.emptyHTML?t=$(this.emptyHTML).addClass("list-finished"):this.emptyText&&(t='<div class="list-finished">'+this.emptyText+"</div>"),this.$el.append(t)}},destroy:function(){this.doSleep(),this.$el.remove(),this.unbindScrollFunc()},remove:function(){this.destroy()}})}),define("bower_components/waterfall/waterfall_html",["require","bower_components/ajax/ajax","jquery","./pager"],function(t){t("bower_components/ajax/ajax");var i=t("jquery"),e=t("./pager");return e.extend({init:function(t){this.$el&&this.$el.find(".list-finished")&&this.$el.find(".list-finished").length>0||(this._super(t),void 0!==t.pageIndex?this.pageIndex=+t.pageIndex:this.pageIndex=1,this.url=t.url||"",this.ajaxType=t.ajaxType||"GET",this.dataType=t.dataType||"json",this.on("finished",this._doFinishLoading),this.onScroll())},_fetchMore:function(){var t=this,e={};this.perPage&&(e[this.jsonKeys.perPage||"perpage"]=this.perPage),this.idValue?e[this.idName]=this.idValue:e[this.jsonKeys.pageIndex||"page"]=this.pageIndex+1;var s=this.getExtrPostData?this.getExtrPostData():{};i._ajax({url:t.url,type:t.ajaxType,dataType:t.dataType,data:i.extend({},t.postData,e,s,t.extraData),timeout:5e3,success:function(i){t.pageIndex++,i&&0==i.code?t.onFetchMoreSuccess({},i||{}):t.doFinishLoading(i)},error:function(i,e,s){t._onFetchMoreError()}})},_onFetchMoreSuccess:function(t,i){var e=(i||{}).data||{};if(e[this.idName]&&(this.idValue=e[this.idName]),this.triggerMethod("after:list:load",e.html||"",i),!e.html)return this.pageIndex--,void this.doFinishLoading(i);this.onScroll()},_doFinishLoading:function(){if(0==this.pageIndex&&this.triggerMethod("list:empty"),this.hasFetching&&this.pageIndex>2){var t=this.getFinishHtml();this.$el.append(t)}}})}),define("text!wap/guang/liutao/templates/rule.html",[],function(){return'<form class="form-dialog">\n    <h2> <span>投桃“抱礼”怎么玩？</span> </h2>\n    <hr>\n    <fieldset>\n        <p class="font-size-14">\n        \t玩法一：女神拍柳桃，撒娇求代付，男神付款成功，前1000对奖黄晓明、周迅最新《撒娇女人最好命》电影票2张。\n            <a class="link" href="http://h5.youzan.com/v2/showcase/goods?alias=5kerpiws">参加</a>\n        </p>\n        <p class="font-size-14">\n            玩法二：送礼和代付最多的各前50名，将获得佳沃一年4个季节鲜果礼包。\n            <a class="link" href="http://h5.youzan.com/v2/showcase/goods?alias=5kerpiws">参加</a>\n        </p>\n        <p class="font-size-14">\n        \t玩法三：每个整点降价抢拍，3箱柳桃礼物低至1元，抢到的用户记得把其中的2箱分享给微信好友哦。\n            <a class="link" href="http://h5.youzan.com/v2/showcase/goods?alias=vnpanhn4">参加</a>\n        </p>\n    </fieldset>\n    <div class="action-container">\n        <button type="button" class="js-ok btn btn-green btn-block">我知道了</button>\n    </div>\n</form>\n'}),define("zenjs/util/number",[],function(){return{makeRandomString:function(t){var i="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t=t||10;for(var s=0;s<t;s++)i+=e.charAt(Math.floor(Math.random()*e.length));return i}}}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(t){var i=function(){},e=t("zenjs/events"),s=t("zenjs/util/number");return window.zenjs=window.zenjs||{},e.extend({init:function(t){this._window=$(window);var e=s.makeRandomString();$("body").append('<div id="'+e+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(t.transparent||".7")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+e),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var n=s.makeRandomString();$("body").append('<div id="'+n+'" class="'+(t.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+n),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),t.contentViewClass&&(this.contentViewClass=t.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},t.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=t.animationTime||300,this.isCanNotHide=t.isCanNotHide,this.doNotRemoveOnHide=t.doNotRemoveOnHide||!1,this.onShow=t.onShow||i,this.onHide=t.onHide||i,this.onFinishHide=t.onFinishHide||i,this.html=t.html},render:function(t){return this.renderOptions=t||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(t){t=t||{};var i=t.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),i||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}})}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(t){return window.zenjs=window.zenjs||{},t("./pop").extend({init:function(t){this._super(t),t.doNotForbidScroll||(this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this)))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var t,i=function(e){if(t!==this._window.scrollTop()&&e>0)return this._window.scrollTop(t),void setTimeout($.proxy(i,this,e-1));setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),t=this.top,this._window.scrollTop(t),$.proxy(i,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var t=window.zenjs.popList;if(t||(t=window.zenjs.popList=[]),0===t.length){var i=$("body"),e=$("html");this.htmlPosition=e.css("position"),e.css("position","relative"),this.bodyCss=(i.prop("style")||{}).cssText,this.htmlCss=(e.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height(),"padding-bottom":0,"margin-bottom":0})}t.indexOf(this)<0&&t.push(this)},startHide:function(){var t=window.zenjs.popList,i=t.indexOf(this);i>-1&&t.splice(i,1),t.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}})}),define("bower_components/pop/popout",["require","./pop_forbid_scroll"],function(t){return t("./pop_forbid_scroll").extend({init:function(t){t=t||{},this._super(t),this.css=$.extend({transition:"opacity ease "+this.animationTime+"ms",top:"50%",left:"50%","-webkit-transform":"translate3d(-50%, -50%, 0)",transform:"translateY(-50%, -50%, 0)"},t.css||{}),this.nPopContainer.css(this.css)},_doShow:function(){$(".js-popout-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.css("opacity",1),this.nPopContainer.show()},_doHide:function(t){this.nPopContainer.css({opacity:0})}})}),define("bower_components/pop/popout_box",["require","./popout"],function(t){var i=function(){};return t("./popout").extend({init:function(t){this._super(t),this._onOKClicked=t.onOKClicked||i,this._onCancelClicked=t.onCancelClicked||i,this.preventHideOnOkClicked=t.preventHideOnOkClicked||!1,this.width=t.width,this.setEventListener()},setEventListener:function(){this.nPopContainer.on("click",".js-ok",$.proxy(this.onOKClicked,this)),this.nPopContainer.on("click",".js-cancel",$.proxy(this.onCancelClicked,this))},_doShow:function(){this.boxCss={"border-radius":"4px",background:"white",width:this.width||"270px",padding:"15px"},this.nPopContainer.css(this.boxCss).addClass("popout-box"),this._super()},_doHide:function(t){this._super()},onOKClicked:function(t){this._onOKClicked(t),!this.preventHideOnOkClicked&&this.hide()},onCancelClicked:function(t){this._onCancelClicked(t),this.hide()}})}),function(t){"use strict";!function(t){function i(t,i){var e=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,e)},i)}function e(t,i){return i=i||100,function(){if(!t.debouncing){var e=Array.prototype.slice.apply(arguments);t.lastReturnVal=t.apply(window,e),t.debouncing=!0}return clearTimeout(t.debounceTimeout),t.debounceTimeout=setTimeout(function(){t.debouncing=!1},i),t.lastReturnVal}}function s(t){return 0===t.offsetWidth&&0===t.offsetHeight}function n(t){for(var i=[],e=t.parentNode;s(e);)i.push(e),e=e.parentNode;return i}function o(t,i){var e=n(t),s=e.length,o=[],a=t[i];if(s){for(var h=0;h<s;h++)o[h]=e[h].style.display,e[h].style.display="block",e[h].style.height="0",e[h].style.overflow="hidden",e[h].style.visibility="hidden";a=t[i];for(var r=0;r<s;r++)e[r].style.display=o[r],e[r].style.height="",e[r].style.overflow="",e[r].style.visibility=""}return a}function a(s,n){if(this.$window=t(window),this.$document=t(document),this.$element=t(s),this.options=t.extend({},c,n),this._defaults=c,this._name=h,this.startEvent=this.options.startEvent.join("."+h+" ")+"."+h,this.moveEvent=this.options.moveEvent.join("."+h+" ")+"."+h,this.endEvent=this.options.endEvent.join("."+h+" ")+"."+h,this.polyfill=this.options.polyfill,this.onInit=this.options.onInit,this.onSlide=this.options.onSlide,this.onSlideEnd=this.options.onSlideEnd,this.polyfill&&d)return!1;this.identifier="js-"+h+"-"+l++,this.min=parseFloat(this.$element[0].getAttribute("min")||0),this.max=parseFloat(this.$element[0].getAttribute("max")||100),this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2),this.step=parseFloat(this.$element[0].getAttribute("step")||1),this.toFixed=(this.step+"").replace(".","").length-1,this.$fill=t('<div class="'+this.options.fillClass+'" />'),this.$handle=t('<div class="'+this.options.handleClass+'" />'),this.$range=t('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle),this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"}),this.handleDown=t.proxy(this.handleDown,this),this.handleMove=t.proxy(this.handleMove,this),this.handleEnd=t.proxy(this.handleEnd,this),this.init();var o=this;this.$window.on("resize."+h,e(function(){i(function(){o.update()},300)},20)),this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown),this.$element.on("change."+h,function(t,i){if(!i||i.origin!==h){var e=t.target.value,s=o.getPositionFromValue(e);o.setPosition(s)}})}var h="rangeslider",r=[],l=0,d=function(){var t=document.createElement("input");return t.setAttribute("type","range"),"text"!==t.type}(),c={polyfill:!0,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};a.prototype.init=function(){this.onInit&&"function"==typeof this.onInit&&this.onInit(),this.update()},a.prototype.setMax=function(t){this.max=t},a.prototype.update=function(){this.handleWidth=o(this.$handle[0],"offsetWidth"),this.rangeWidth=o(this.$range[0],"offsetWidth"),this.maxHandleX=this.rangeWidth-this.handleWidth,this.grabX=this.handleWidth/2,this.position=this.getPositionFromValue(this.value),this.$element[0].disabled?this.$range.addClass(this.options.disabledClass):this.$range.removeClass(this.options.disabledClass),this.setPosition(this.position)},a.prototype.handleDown=function(t){if(t.preventDefault(),this.$document.on(this.moveEvent,this.handleMove),this.$document.on(this.endEvent,this.handleEnd),!((" "+t.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1)){var i=this.getRelativePosition(t),e=this.$range[0].getBoundingClientRect().left,s=this.getPositionFromNode(this.$handle[0])-e;this.setPosition(i-this.grabX),i>=s&&i<s+this.handleWidth&&(this.grabX=i-s)}},a.prototype.setStatus=function(t){this.__status=t},a.prototype.getStatus=function(t){return this.__status},a.prototype.handleMove=function(t){t.preventDefault();var i=this.getRelativePosition(t);this.setPosition(i-this.grabX),this.setStatus("MOVE")},a.prototype.handleEnd=function(t){t.preventDefault(),this.$document.off(this.moveEvent,this.handleMove),this.$document.off(this.endEvent,this.handleEnd),this.setStatus(void 0),this.onSlideEnd&&"function"==typeof this.onSlideEnd&&this.onSlideEnd(this.position,this.value)},a.prototype.cap=function(t,i,e){return t<i?i:t>e?e:t},a.prototype.setPosition=function(t){var i,e;i=this.getValueFromPosition(this.cap(t,0,this.maxHandleX)),e=this.getPositionFromValue(i),this.$fill[0].style.width=e+this.grabX+"px",this.$handle[0].style.left=e+"px",this.setValue(i),this.position=e,this.value=i,this.onSlide&&"function"==typeof this.onSlide&&this.onSlide(e,i)},a.prototype.getPositionFromNode=function(t){for(var i=0;null!==t;)i+=t.offsetLeft,t=t.offsetParent;return i},a.prototype.getRelativePosition=function(t){var i=this.$range[0].getBoundingClientRect().left,e=0;return t.originalEvent=t.originalEvent||t,void 0!==t.pageX&&0!==t.pageX?e=t.pageX:void 0!==t.originalEvent.clientX?e=t.originalEvent.clientX:t.originalEvent.touches&&t.originalEvent.touches[0]&&void 0!==t.originalEvent.touches[0].clientX?e=t.originalEvent.touches[0].clientX:t.currentPoint&&void 0!==t.currentPoint.x&&(e=t.currentPoint.x),e-i},a.prototype.getPositionFromValue=function(t){var i;return i=(t-this.min)/(this.max-this.min),i*this.maxHandleX},a.prototype.getValueFromPosition=function(t){var i,e;return i=t/(this.maxHandleX||1),e=this.step*Math.round(i*(this.max-this.min)/this.step)+this.min,Number(e.toFixed(this.toFixed))},a.prototype.setValue=function(t){t!==this.value&&this.$element.val(t).trigger("change",{origin:h})},a.prototype.destroy=function(){this.$document.off(this.startEvent,"#"+this.identifier,this.handleDown),this.$element.off("."+h).removeAttr("style").removeData("plugin_"+h),this.$range&&this.$range.length&&this.$range[0].parentNode.removeChild(this.$range[0]),r.splice(r.indexOf(this.$element[0]),1),r.length||this.$window.off("."+h)},t.fn[h]=function(i){return this.each(function(){var e=t(this),s=e.data("plugin_"+h);s||(e.data("plugin_"+h,s=new a(this,i)),r.push(this)),"string"==typeof i&&s[i]()})}}($)}(),define("wap/showcase/modules/audio/rangeslider",function(){}),define("wap/showcase/modules/audio/audio",["require","wap/showcase/modules/audio/rangeslider"],function(t){t("wap/showcase/modules/audio/rangeslider"),function(){var t="custom-audio-status-loading",i="custom-audio-status-play",e="custom-audio-status-stop",s="custom-audio-status-pause",n=function(){},o=function(t){if(!(this instanceof o))return new o(t);this.target=t.target,this.$target=$(this.target),this.$trigger=this.$target.find(".js-trigger"),this.$trigger.length<=0&&(this.$trigger=this.$target),this.$duration=this.$target.find(".js-duration"),this.$currentTime=this.$target.find(".js-current-time"),this.$percentage=this.$target.find(".js-percentage"),this.$status=this.$target.find(".js-status"),this.$loading=this.$target.find(".js-loading"),this.$title=this.$target.find(".js-title"),this.pureSrc=this.$target.data("src");var i="";if(/\.amr$/.test(this.pureSrc)&&(i="?avthumb/mp3/ab/64k/writeXing/0"),this.src=this.pureSrc+i,this.reload=this.$target.data("reload"),this.loop=this.$target.data("loop"),this.callback={},this.callback.play=t.play||n,this.callback.pause=t.pause||n,this.callback.stop=t.stop||n,this.$target.length<=0)throw new Error("音频DOM对象不能为空");if(!this.src)throw new Error("音频文件地址不能为空");this.audio=new Audio,this.$audio=$(this.audio),this.init(),o._cache.indexOf(this)<0&&o._cache.push(this)};o._cache=[],o.prototype={init:function(){this.addEvent()},initRangeSlider:function(){var t=this;this.$percentage.attr("max",this._duration),this.$percentage.rangeslider({polyfill:!1,onSlide:function(i,e){t._updateCurrentTime(e)},onSlideEnd:function(i,e){t.audio.currentTime=e}})},leading:function(t){return 1===t.toString().length?"0":""},getDuration:function(){if(!this._duration){var t=this.pureSrc;return t=t.split("?")[0]+"?avinfo",$._ajax({url:t,dataType:"json"})}},_updateDuration:function(t){var i=parseInt(t/60,10),e=parseInt(t%60,10),s=this.leading(i)+i+":"+this.leading(e)+e;this.$duration.text(s)},updateCurrentTime:function(t){var i=t.target,e=Math.floor(+i.currentTime),s=Math.floor(+i.duration),n=this.$percentage.data("plugin_rangeslider");if(s!==this._duration&&(this._duration=s,n&&n.length>0&&n.setMax(s)),!isNaN(s)){if(this.loaded(),n&&n.length>0){if(n.getStatus())return}this._updateCurrentTime(e)}},_updateCurrentTime:function(t){var i=parseInt(t/60,10),e=parseInt(t%60,10),s=this.leading(i)+i+":"+this.leading(e)+e+"/";this.$currentTime.text(s)},updatePercentage:function(t){if(!(this.$percentage.length<1)){if(!this.$percentage.data("plugin_rangeslider").getStatus()){var i=t.target,e=Math.floor(+i.currentTime);this.$percentage.val(e).change()}}},showStatus:function(t){this.$title.hide(),this.$status.text(t).show()},clearStatus:function(){this.$title.show(),this.$status.hide(),this.$status.text("")},loading:function(){this.$loading.css("display","block"),this.$target.addClass(t)},loaded:function(){this.$loading.css("display","none"),"PLAY"===this._status&&(this.$target.addClass(i),this.$target.removeClass(s),this.$target.removeClass(e),this.$target.removeClass(t))},addEvent:function(){var n=this;this.$audio.on("play",function(t){n.clearStatus()}),this.$audio.on("canplay",function(){n._loaded||n.durationDefer.done(function(t){var i=Math.floor(+t.format.duration);n._duration=i,n.initRangeSlider(),n._updateDuration(i),n._isLoading=!1,n._loaded=!0,n.loaded(),n.play()})}),this.$audio.on("timeupdate",function(t){n.updateCurrentTime(t),n.updatePercentage(t)}),this.$audio.on("error",function(o){n.showStatus("加载失败，点击重试"),n._loaded=!1,n._status="ERROR",n.$loading.css("display","none"),n.$target.removeClass(i),n.$target.removeClass(s),n.$target.removeClass(e),n.$target.removeClass(t)}),this.$audio.on("ended",function(t){n.stop()}),this.$trigger.on("click",function(){if(!n._isLoading)return n._loaded?void("PLAY"!==n._status?n.play():n.reload?n.stop():n.pause()):(n._isLoading=!0,void n.load())})},load:function(){this.loading(),this.durationDefer=this.getDuration();var t={loop:this.loop,preload:"auto",src:this.src};for(var i in t)t.hasOwnProperty(i)&&i in this.audio&&(this.audio[i]=t[i]);this.audio.load()},play:function(){if("PLAY"!==this._status){for(var t=0;t<o._cache.length;t++)o._cache[t]!==this&&o._cache[t].stop();this.audio.play(),this._status="PLAY",this.callback.play()}},pause:function(){"PLAY"===this._status&&(this.audio.pause(),this._status="PAUSE",this.callback.pause(),this.$target.addClass(s),this.$target.removeClass(i),this.$target.removeClass(e))},stop:function(){"PLAY"===this._status&&(this.audio.pause(),this.audio.currentTime=0,this._status="STOP",this.callback.stop(),this.$target.addClass(e),this.$target.removeClass(s),this.$target.removeClass(i))}},o.prototype.constructor=o,$.fn.audioPlayer=function(t){t=t||{},$.each(this,function(i,e){var s=$.extend({target:e},t);o(s)})}}()}),require(["wap/showcase/modules/audio/audio"],function(){$(".js-audio").audioPlayer()}),define("wap/showcase/modules/audio/main",function(){}),define("zenjs/util/count_down",[],function(){function t(t){return t<10?"0"+t:""+t}function i(i,e,s,n,o){var a=0,h=0,r=0,l=0,d=0,c="",u=new Date,p=i.getTime()-u.getTime();if(p<=0)return o.stop(),e({seconds:0,text:"00:00:000",hour:0,min:0,sec:0,msec:0,day:0},{day:t(0),hour:t(0),min:t(0),sec:t(0),msec:t(0)}),void s();p>=864e5&&(a=Math.floor(p/864e5),p-=864e5*a,c+=a+"天"),p>=36e5&&(h=Math.floor(p/36e5),p-=36e5*h,c+=h+"小时"),p>=6e4?(r=Math.floor(p/6e4)%60,l=Math.floor(p/1e3)%60,d=p%1e3):(r=0,l=Math.floor(p/1e3),d=p%1e3),r<10&&(c+="0"),c+=r+"分",l<10&&(c+="0"),c+=l+"秒",d<10?c+="00":d<100&&(c+="0"),"second"!=n&&(c+=d),e({text:c,hour:h,min:r,sec:l,msec:d,day:a},{day:t(a),hour:t(h),min:t(r),sec:t(l),msec:t(d)})}function e(){this.tid=null,this.startTime=null}var s=function(){};return e.prototype={run:function(t){function e(){r.tid=setTimeout(e,"second"==t.step?1e3:50),i(h,o,a,t.step,r)}this.startTime||(this.startTime=Date.now());var n=t.seconds||0,o=t.onTimeChange||s,a=t.onTimeChangeEnd||s;this.startTime+=1e3*n;var h=new Date(this.startTime),r=this;e()},stop:function(){clearTimeout(this.tid)}},e}),require(["zenjs/backbone/tabber","bower_components/waterfall/waterfall_html","text!wap/guang/liutao/templates/rule.html","bower_components/pop/popout_box","wap/showcase/modules/audio/main","zenjs/util/count_down"],function(t,i,e,s,n,o){new(Backbone.View.extend({initialize:function(i){if(this.WFContainers={"top-gift":$(".js-top-gift"),"top-peerpay":$(".js-top-peerpay")},this.WFs={},this.urls={"top-gift":"./liutao/giftRank.json","top-peerpay":"./liutao/peerpayRank.json"},this.tabber=new t({el:$(".js-type-tabber"),defaultData:"top-peerpay",onClicked:_(this.onTabberClicked).bind(this)}).render(),this.nMin1=this.$(".js-min-1"),this.nMin2=this.$(".js-min-2"),this.nSec1=this.$(".js-sec-1"),this.nSec2=this.$(".js-sec-2"),window._global.auction){(new o).run({seconds:parseInt(window._global.auction.data.next_countdown,10),onTimeChange:_(this.onTimeChange).bind(this),step:"second"})}$(window).scroll(_(this.onScroll).bind(this))},events:{"click .js-rule":"showRule","click .js-bottom":"onBottomClicked"},onTabberClicked:function(t){$(".js-top").addClass("hide"),$(".js-"+t.value).removeClass("hide"),this.WFs[t.value]||(this.WFs[t.value]=new i({el:this.WFContainers[t.value],perPage:10,total:50,url:this.urls[t.value],onDataLoad:_(function(i){this.WFContainers[t.value].find(".js-list").append(i)}).bind(this),finishedHTML:" ",onFinished:function(){$(".list-finished").hide()}})),this.WFs[t.value].doWake();var e=this.WFs["top-gift"===t.value?"top-peerpay":"top-gift"];e&&e.doSleep()},showRule:function(){new s({html:e,transparent:".8"}).render().show()},onTimeChange:function(t){this.nMin1.html(parseInt(t.min/10,10)),this.nMin2.html(t.min%10),this.nSec1.html(parseInt(t.sec/10,10)),this.nSec2.html(t.sec%10)},onBottomClicked:function(t){this.$(".js-bottom a").removeClass("active"),$(t.target).addClass("active")},onScroll:function(){var t,i=function(){if($("body").scrollTop()<$("#link").offset().top)return void $(".js-bottom a").removeClass("active");$(".js-anchor").each(function(){$("body").scrollTop()>=$(this).offset().top&&($(".js-bottom a").removeClass("active"),$("#btn-"+$(this).data("id")).addClass("active"))})};return function(e){clearTimeout(t),t=setTimeout(_(i).bind(this),50)}}()}))({el:$("body")})}),define("main",function(){});