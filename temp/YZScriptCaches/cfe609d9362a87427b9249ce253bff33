define("zenjs/util/tpl",["require","jquery"],function(t){var e=t("jquery"),i=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},e=["&","<",">",'"',"'"],i=new RegExp("["+e.join("")+"]","g");return function(e){return null==e?"":(""+e).replace(i,function(e){return t[e]})}}(),n={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},s={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};return function(t,o,r){var a;r=e.extend({},n,r);var h=new RegExp([(r.escape||/(.)^/).source,(r.interpolate||/(.)^/).source,(r.evaluate||/(.)^/).source].join("|")+"|$","g"),u=0,c="__p+='";t.replace(h,function(e,i,n,o,r){return c+=t.slice(u,r).replace(/\\|'|\r|\n|\t|\u2028|\u2029/g,function(t){return"\\"+s[t]}),i&&(c+="'+\n((__t=("+i+"))==null?'':escapeFunc(__t))+\n'"),n&&(c+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),o&&(c+="';\n"+o+"\n__p+='"),u=r+e.length,e}),c+="';\n",r.variable||(c="with(obj||{}){\n"+c+"}\n"),c="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+c+"return __p;\n";try{a=new Function(r.variable||"obj","escapeFunc",c)}catch(t){throw t.source=c,t}if(o)return a(o,i);var p=function(t){return a.call(this,t,i)};return p.source="function("+(r.variable||"obj")+"){\n"+c+"}",p}}),define("zenjs/swp/utils",["require"],function(t){"use strict";function e(){this.__events={}}var i=$.extend;return e.prototype={on:function(t,e){return this.__events[t]||(this.__events[t]=[]),this.__events[t].push(e),this},emit:function(t){var e=this.__events[t],i=Array.prototype.slice.call(arguments,1),n=this;e&&e.forEach(function(t){t.apply(n,i)})},removeListener:function(t,e){if(void 0!=this.__events[t]){var i;e?(i=this.__events[t].indexOf(e))>0&&this.__events[t].splice(i,1):delete this.__events[t]}}},{extend:i,EventEmitter:e,requestAnimationFrame:window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){return window.setTimeout(t,1e3/60)},cancelAnimationFrame:window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msRequestAnimationFrame||function(t){clearTimeout(t)}}}),define("zenjs/swp/input",["require","./utils"],function(t){"use strict";function e(t,e){n.apply(this,arguments),this.isStarting=!1,this.startPt=null,this.endPt=null,this.isDeaf=!1,this.options=s({listenMoving:!1},e),this.host=$(t),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.bind(this.host)}var i=t("./utils"),n=i.EventEmitter,s=i.extend;return e.prototype=Object.create(new n),s(e.prototype,{bind:function(t){var e=$(window);t.on("touchstart mousedown",this.onTouchStart),this.options.listenMoving&&e.on("touchmove mousemove",this.onTouchMove),e.on("touchend mouseup touchcancel",this.onTouchEnd)},onTouchStart:function(t){this.isDeaf||this.isStarting||(this.isStarting=!0,this.orgDirection=null,this.startPt=this.pointerEventToXY(t))},onTouchMove:function(t){this.isStarting&&this.caculate(t)},onTouchEnd:function(t){this.isStarting&&(this.isStarting=!1,this.caculate(t,!0))},caculate:function(t,e){var i,n;this.endPt=this.pointerEventToXY(t),i=this.startPt.y-this.endPt.y,n=this.startPt.x-this.endPt.x,0!=i&&this.emit(i>0?"up":"down",i,e,t),0!=n&&this.emit(n>0?"left":"right",n,e,t),null==this.orgDirection&&(this.orgDirection=Math.abs(n)>Math.abs(i)),this.emit("move",{x:n,y:i},e,t,{orgDirection:this.orgDirection})},pointerEventToXY:function(t){var e={x:0,y:0},i=t.type;if(t.originalEvent&&(t=t.originalEvent),"touchstart"==i||"touchmove"==i||"touchend"==i||"touchcancel"==i){var n=t.touches[0]||t.changedTouches[0];e.x=n.pageX,e.y=n.pageY}else"mousedown"!=i&&"mouseup"!=i&&"mousemove"!=i&&"mouseover"!=i&&"mouseout"!=i&&"mouseenter"!=i&&"mouseleave"!=i||(e.x=t.pageX,e.y=t.pageY);return e},deaf:function(){this.isDeaf=!0},undeaf:function(){this.isDeaf=!1},destroy:function(){var t=$(window);this.host.off("touchstart mousedown",this.onTouchStart),this.options.listenMoving&&t.off("touchmove mousemove",this.onTouchMove),t.off("touchend mouseup touchcancel",this.onTouchEnd)}}),e}),define("zenjs/swp/scroll",["require","./utils"],function(t){"use strict";function e(t,e){n.apply(this,arguments),this.wrapElem=t,this.wrapSize={width:t.width(),height:t.height()},this.options=s({loop:!0,autoPlay:!1,startIndex:0},e),this.init.apply(this,arguments)}var i=t("./utils"),n=i.EventEmitter,s=i.extend;return e.prototype=Object.create(new n),s(e.prototype,{init:function(){var t;this.wrapElem;this.pages=this.wrapElem.find(".swp-page"),t={position:"absolute",top:0,left:0,width:"100%",height:"100%",display:"block","-webkit-transform":"translate3d(-9999px, 0, 0)"},this.pages.css(t),this.mCache={dist:0,offsetPage:0},this.setCurrentPage(0),this.movePage(this.options.startIndex*this.wrapSize.width,!0)},getCurrentDist:function(){return this.mCache.currentDist},renderPage:function(t,e){void 0==t&&(t=0),void 0==e&&(e=0);var i,n,s,o=this.wrapSize.width,r=e*o-t,a=r-o,h=r+o;i=this.getCurrentPage(),i.length&&(i[0].style["-webkit-transform"]="translate3d("+r+"px, 0, 0)",$(i[0]).addClass("page-in-view")),n=this.pages[this.mapLoopPage(e-1)],n&&(Math.abs(a)<=o?n.style["-webkit-transform"]="translate3d("+a+"px, 0, 0)":this.pages.length>2&&(n.style["-webkit-transform"]="translate3d(-9999px, 0, 0)"),$(n).removeClass("page-in-view")),(s=this.pages[this.mapLoopPage(e+1)])&&(Math.abs(h)<=o?s.style["-webkit-transform"]="translate3d("+h+"px, 0, 0)":this.pages.length>2&&(s.style["-webkit-transform"]="translate3d(-9999px, 0, 0)"),$(s).removeClass("page-in-view"))},movePage:function(t,e){var i;this.mCache.currentDist=t+this.mCache.dist,e&&(this.mCache.dist+=t),i=Math.round(this.mCache.currentDist/this.wrapSize.width),i!=this.mCache.offsetPage&&(this.setCurrentPage(i),this.emit("pageChangeEnd",this.getCurrentPage(),this.currentIndex,this.mCache.offsetPage),this.mCache.offsetPage=i),this.renderPage(this.mCache.currentDist,i)},getCurrentPage:function(){return this.pages.eq(this.currentIndex)},mapLoopPage:function(t){if(this.options.loop){var e=t<0?-1:1,i=this.pages.length;return Math.abs(i+e*Math.abs(t)%i)%i}return t>=this.pages.length||t<0?this.pages.length:t},setCurrentPage:function(t){this.currentIndex=this.mapLoopPage(t)}}),e}),define("zenjs/swp/spring_dummy",["require","./utils"],function(t){"use strict";function e(t,e,s){var o=t.wrapElem,r=this;n.apply(this,arguments),this.scroll=t,this.input=e,this.input.on("move",this.movementReact.bind(this)),this.wrapSize={width:o.width(),height:o.height()},this.options=i.extend({intervalTween:3e3,threshold:20},s),this.scroll.options.autoPlay&&this.initMove(),this.on("bounceEnd",function(){r.scroll.options.autoPlay&&r.initMove(),r.input.undeaf()}).on("bounceStart",function(){r.input.deaf()})}var i=t("./utils"),n=i.EventEmitter,s=i.requestAnimationFrame,o=i.cancelAnimationFrame,r=i.extend;return e.prototype=Object.create(new n),r(e.prototype,{clearTransition:function(){o(this.transitionReq)},movementReact:function(t,e,i,n){this.clearMove(),e&&this.launch(n.orgDirection?t.x:0)},launch:function(t){var e=this,i=t/Math.abs(t),n=0,s=e.wrapSize.width,o=Math.round(t/s),r=this.scroll.mCache.offsetPage;n=s*o,0==n&&Math.abs(t)>e.options.threshold&&(n=s*i),e.scroll.options.loop||(r<=0&&(n=Math.abs(t)>e.options.threshold&&i>0?s*i:s*(o-r)),1==this.scroll.pages.length?n=0:r>=this.scroll.pages.length-1&&(n=Math.abs(t)>e.options.threshold&&i<0?s*i:s*(o-r+this.scroll.pages.length-1))),this.initTween(n-t,150,"bounce")},initTween:function(t,e,i){function n(){if((o=new Date-a)>e)return r.emit(i,{x:t},!0),void r.emit(i+"End");r.emit(i,{x:t/e*o},!1),r.tweenRid=s(n)}if(0==t)return void this.emit(i+"End");var o,r=this,a=new Date;this.cancelTween(),this.emit(i+"Start"),n()},cancelTween:function(){o(this.tweenRid)},initMove:function(){function t(){i.currentIndex!=i.pages.length-1||i.options.loop?e.initTween(e.wrapSize.width,200,"autoPlay"):e.initTween(-e.wrapSize.width*(i.pages.length-1),200,"autoPlay"),e.moveTid=setTimeout(t,n)}var e=this,i=this.scroll,n=e.options.intervalTween;this.clearMove(),e.moveTid=setTimeout(t,n)},clearMove:function(){clearTimeout(this.moveTid)}}),e}),define("zenjs/swp/swp",["require","./input","./utils","./scroll","./spring_dummy"],function(t){"use strict";function e(t,e){this.wrapElem=t,this.options=e||{}}var i=t("./input"),n=t("./utils"),s=t("./scroll"),o=n.EventEmitter,r=n.extend,a=t("./spring_dummy");return e.prototype=Object.create(new o),r(e.prototype,{init:function(){if(!this.wrapElem.data("swp-init")){this.wrapElem.data("swp-init",!0);var t,e=this;$(window).on("dragstart",function(t){$(e.wrapElem).has(t.target).length>0&&t.preventDefault()}),this.input=new i(this.wrapElem,{listenMoving:!0}),t=this.scroll=new s(this.wrapElem,this.options),this.input.on("move",function(e,i,n,s){s.orgDirection&&(n.preventDefault(),t.movePage(e.x,i))}),this.dummy=new a(this.scroll,this.input,this.options),this.dummy.on("bounce",function(e,i){t.movePage(e.x,i)}).on("autoPlay",function(e,i){t.movePage(e.x,i)}),t.on("pageChangeEnd",function(t,e,i){this.emit("pageChangeEnd",t,e,i)}.bind(this)),this.initThumbnail()}},initThumbnail:function(){var t=this.options.thumbnailWrap;if(void 0!=t&&!(this.scroll.pages.length<=1)){t.empty();var e=$('<ul class="swp-thumbnail-list">');this.scroll.pages.each(function(){e.append('<li class="swiper-pagination-switch">')}),t.append(e),this.scroll.on("pageChangeEnd",function(t,i,n){var s;e.children().each(function(){s=$(this),s.toggleClass("swiper-active-switch",s.index()==i)})}),e.children().eq(this.scroll.currentIndex).addClass("swiper-active-switch")}},destroy:function(){this.input.destroy()}}),e}),define("text!zenjs/swp/templates/preview.html",[],function(){return'<style>\n    .swp-preview {\n        position: fixed;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        z-index: 5000;\n        background-color: rgba(0,0,0,.95)\n    }\n    .swp-preview-page-wrap {\n        position: absolute;\n        left: 10px;\n        right: 10px;\n        top: 0;\n        bottom: 0;\n    }\n    .swp .swp-page.swp-preview-page img {\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        width: 100%;\n        transform: translate3d(-50%, -50%, 0);\n        -webkit-transform: translate3d(-50%, -50%, 0);\n    }\n</style>\n\n<ul class="swp js-swp-wrap">\n    <% imgObjs.forEach(function(item){%>\n    <li class="swp-page swp-preview-page">\n        <div class="swp-preview-page-wrap">\n            <img class="swp-img" src="<%= item.src %>">\n        </div>\n    </li>\n    <% }) %>\n</ul>'}),define("zenjs/swp/preview",["require","../util/tpl","./swp","text!./templates/preview.html","./input"],function(t){"use strict";function e(t){this.rootElem=t}var i=t("../util/tpl"),n=t("./swp"),s=i(t("text!./templates/preview.html")),o=t("./input"),r=o.prototype.pointerEventToXY,a=$('<div class="swp-preview">');return function(){var t;a.on("mousedown touchstart",function(e){t=r(e)}).on("mouseup touchend",function(e){e.preventDefault();var i=r(e);Math.abs(i.x-t.x)+Math.abs(i.y-t.y)<10&&setTimeout(function(){a.remove()},200)})}(),e.prototype={init:function(){if(!this.rootElem.data("swp-preview-init")){this.rootElem.data("swp-preview-init",!0);var t=this;this.imgObjs=[],this.rootElem.on("click",function(e){var i,n=t.extractSrcFromElement($(e.target));t.imgObjs=t.extractSrc(),t.imgObjs.some(function(t,e){if(t.src==n)return i=e,!0}),void 0!=i&&t.pop(i)})}},pop:function(t){a.empty().appendTo($("body")),this.initSwp(t)},initSwp:function(t){a.html(s({imgObjs:this.imgObjs})),this.swp&&this.swp.destroy(),this.swp=new n(a.find(".js-swp-wrap"),{loop:!1,autoPlay:!1,startIndex:t}),this.swp.init()},extractSrc:function(){var t=this;return Array.prototype.slice.apply(this.rootElem.find("img, .swp-preview-item")).map(function(e){return{src:t.extractSrcFromElement($(e))}}).concat({src:this.extractSrcFromElement(this.rootElem)}).filter(function(t){return t.src})},extractSrcFromElement:function(t){return t.data("preview-src")||t.attr("src")||t.data("src")}},e}),require(["zenjs/swp/preview"],function(t){"use strict";$(".js-swp-preview").each(function(){var e=$(this);new t(e).init()})}),define("main",function(){});