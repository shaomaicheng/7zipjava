define("wap/components/autosize_textarea/index",["require","exports","module","jquery","underscore"],function(e,t,i){var o=e("jquery"),n=e("underscore"),s=function(e){var t={"overflow-x":"hidden"};if(n.extend(this,e),!this.el)throw new Error("缺少el参数");this.$el=this.el instanceof o?this.el:o(this.el),this.el=this.$el[0],this.style&&(t=n.extend(t,this.style)),this.$el.css(t),this.init()};n.extend(s.prototype,{init:function(){var e=this.$el,t=parseInt(e.css("padding-bottom"),10)+parseInt(e.css("padding-top"),10)||0;o.trim(e.val()).length&&e.height(e[0].scrollHeight-t),this.$el.on("input",function(){o(this).height(0).height(this.scrollHeight-t)})}}),i.exports=s}),require(["wap/components/autosize_textarea/index","zenjs/util/ua"],function(e,t){"use strict";var i=window._global.invite.share_url,o=!1,n=$(".head-block").height()-80;$(".js-share-btn").click(function(){if(o)return void window.motify.log("正在发送请求");o=!0,$._ajax({url:"/v2/pay/peerpay/message.json",type:"POST",dataType:"json",data:{order_no:window._global.invite.order_no,message:$(".js-msg-textarea").val(),peerpay_type:window._global.invite.peerpay_type},success:function(e){if(0!==e.code)return void window.motify.log(e.msg);o=!1,window.location.href=i},error:function(e,t,i){window.motify.log("更新留言失败")}})}),new e({el:$(".js-msg-textarea")[0]}),window.setTimeout(function(){$("body").scrollTop(n)},300);var s=$(".js-bottom-btn-block"),r=$(".js-android-finish-btn");$(".js-msg-textarea").focus(function(){$("body").scrollTop(n),s.addClass("hide"),t.isAndroid()&&r.removeClass("hide")}),$(".js-msg-textarea").blur(function(){$("body").scrollTop(0),s.removeClass("hide"),t.isAndroid()&&r.addClass("hide")});var a=$(".js-head-block-bg");a.click(function(){a.toggleClass("on-top")}),r.click(function(){r.hide()})}),define("main",function(){});