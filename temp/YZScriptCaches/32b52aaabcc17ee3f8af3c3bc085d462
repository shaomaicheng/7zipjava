define("zenjs/util/count_down",[],function(){function n(n){return n<10?"0"+n:""+n}function t(t,o,e,i,d){var u=0,s=0,a=0,c=0,r=0,f="",m=new Date,h=t.getTime()-m.getTime();if(h<=0)return d.stop(),o({seconds:0,text:"00:00:000",hour:0,min:0,sec:0,msec:0,day:0},{day:n(0),hour:n(0),min:n(0),sec:n(0),msec:n(0)}),void e();h>=864e5&&(u=Math.floor(h/864e5),h-=864e5*u,f+=u+"天"),h>=36e5&&(s=Math.floor(h/36e5),h-=36e5*s,f+=s+"小时"),h>=6e4?(a=Math.floor(h/6e4)%60,c=Math.floor(h/1e3)%60,r=h%1e3):(a=0,c=Math.floor(h/1e3),r=h%1e3),a<10&&(f+="0"),f+=a+"分",c<10&&(f+="0"),f+=c+"秒",r<10?f+="00":r<100&&(f+="0"),"second"!=i&&(f+=r),o({text:f,hour:s,min:a,sec:c,msec:r,day:u},{day:n(u),hour:n(s),min:n(a),sec:n(c),msec:n(r)})}function o(){this.tid=null,this.startTime=null}var e=function(){};return o.prototype={run:function(n){function o(){a.tid=setTimeout(o,"second"==n.step?1e3:50),t(s,d,u,n.step,a)}this.startTime||(this.startTime=Date.now());var i=n.seconds||0,d=n.onTimeChange||e,u=n.onTimeChangeEnd||e;this.startTime+=1e3*i;var s=new Date(this.startTime),a=this;o()},stop:function(){clearTimeout(this.tid)}},o}),require(["zenjs/util/count_down"],function(n){function t(t,o){function i(){p>0&&l.text(e.BuyNowButton)}function d(){l.text(e.ViewNowButton)}function u(n,t){w.find(".countdown-day").text(t.day),w.find(".countdown-hour").text(t.hour),w.find(".countdown-minute").text(t.min),w.find(".countdown-second").text(t.sec)}function s(t){h.text(e.StartCountdown),(new n).run({step:"seconds",seconds:t,onTimeChange:u,onTimeChangeEnd:function(){a(c)}}),d()}function a(t){h.text(e.EndCountdown),i(),(new n).run({step:"seconds",seconds:r-t,onTimeChange:u,onTimeChangeEnd:function(){m<f?(d(),o.find(".good-image-mask").addClass("expired")):s(m-r)}})}var c=parseInt(t.attr("data-start")||0,10),r=parseInt(t.attr("data-end")||0,10),f=parseInt(t.attr("data-now")||0,10),m=parseInt(t.attr("data-next")||0,10),h=t.find(".countdown-title"),w=t.find(".countdown-time"),l=o.find(".js-btn-good-link"),p=o.data("stockNum")||0;f<c?s(c-f):f<=r?a(f):(h.text(e.EndCountdown),u({},{day:"00",hour:"00",min:"00",sec:"00"})),o.find(".discount-countdown").css("display","")}var o=$(".ump-limitdiscount"),e={StartCountdown:"距离活动开始",EndCountdown:"距离折扣结束还剩",ViewNowButton:"立即查看",BuyNowButton:"立即购买"};o.find(".ump-limitdiscount-good").each(function(n,o){var e=$(o);t(e.find(".js-countdown"),e)})}),define("main",function(){});