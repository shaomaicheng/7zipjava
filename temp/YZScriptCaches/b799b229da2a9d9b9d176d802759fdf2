define("wap/components/app_h5/main",["require","exports","module"],function(o,t,e){e.exports={currentUrl:"",currentTime:Date.now(),doCall:function(o,t){window.onReady("YouzanJSBridge",function(){window.YouzanJSBridge.doCall(o,t)})},compareVersion:function(o,t){for(o=o.split(".").join(""),t=t.split(".").join("");o.length!==t.length;)o.length>t.length?t+="0":o+="0";return o=Number(o),t=Number(t),o>t?"gt":o===t?"eq":"lt"},eq:function(o,t){return"eq"===this.compareVersion(o,t)},gte:function(o,t){var e=this.compareVersion(o,t);return"eq"===e||"gt"===e},lte:function(o,t){var e=this.compareVersion(o,t);return"eq"===e||"lt"===e},configNative:function(o){this.doCall("configNative",o)},getData:function(o,t){t.datatype=o,this.doCall("getData",t)},putData:function(o,t){if("youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))t.datatype=o,this.doCall("putData",t);else switch(o){case"supplierInfo":this.doCall("tellSupplierInfo",{supplier_kdt_id:t.supplier_kdt_id});break;case"goodsInfo":this.doCall("tellGoodsInfo",{goods_id:t.goods_id})}else t.datatype=o,this.doCall("putData",t)},gotoWebview:function(o){if(this.currentUrl===o.url&&Date.now()-this.currentTime<100)this.currentTime=Date.now();else if(this.currentUrl=o.url,this.currentTime=Date.now(),"youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))this.doCall("gotoWebview",o);else switch(o.page){case"supplierHomepage":this.doCall("goHomePage",{homeurl:o.url,name:o.name});break;case"goodsList":this.doCall("viewGoodsList",{url:o.url});break;case"goodsDetail":this.doCall("viewGoodsDetail",{detail_url:o.url,average_profit:o.average_profit,alias:o.alias,seller_goods_alias:o.seller_goods_alias});break;case"newsDetail":this.doCall("viewNewsDetail",{detail_url:o.url})}else this.doCall("gotoWebview",o)},gotoNative:function(o){if("youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))this.doCall("gotoNative",o);else switch(o.page){case"addGoods":this.doCall("addGoodsToShop",{alias:o.alias,seller_goods_alias:o.seller_goods_alias})}else this.doCall("gotoNative",o)},doAction:function(o){if("youzanwxd"===_global.platform)if(this.gte(_global.platform_version,"1.5.0"))this.doCall("doAction",o);else switch(o.action){case"back":this.doCall("gotoLogin",{});break;case"appWXPay":this.doCall("appWXPay",{kdt_id:o.kdt_id,order_no:o.order_no});break;case"deliverGoods":this.doCall("deliverGoods",{order_number:o.order_number})}else if("youzanwsc"===_global.platform)if(this.gte(_global.platform_version,"2.8.5"))this.doCall("doAction",o);else switch(o.action){case"back":this.doCall("previousStep",{})}},onAddGoodsSuccess:function(o){window.onReady("YouzanJSBridge",function(){window.YouzanJSBridge.on("addGoodsSuccess",function(t){o(t)})})},on:function(o,t){window.onReady("YouzanJSBridge",function(){window.YouzanJSBridge.on("dataReady",function(e){var i=e.datatype,n=e.data,s={};if("object"==typeof n)s=n;else try{s=JSON.parse(n)}catch(o){}i===o&&t(s)})})}}}),define("zenjs/util/number",[],function(){return{makeRandomString:function(o){var t="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";o=o||10;for(var i=0;i<o;i++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}}}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(o){var t=function(){},e=o("zenjs/events"),i=o("zenjs/util/number");return window.zenjs=window.zenjs||{},e.extend({init:function(o){this._window=$(window);var e=i.makeRandomString();$("body").append('<div id="'+e+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(o.transparent||".7")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+e),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var n=i.makeRandomString();$("body").append('<div id="'+n+'" class="'+(o.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+n),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),o.contentViewClass&&(this.contentViewClass=o.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},o.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=o.animationTime||300,this.isCanNotHide=o.isCanNotHide,this.doNotRemoveOnHide=o.doNotRemoveOnHide||!1,this.onShow=o.onShow||t,this.onHide=o.onHide||t,this.onFinishHide=o.onFinishHide||t,this.html=o.html},render:function(o){return this.renderOptions=o||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(o){o=o||{};var t=o.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),t||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}})}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(o){return window.zenjs=window.zenjs||{},o("./pop").extend({init:function(o){this._super(o),o.doNotForbidScroll||(this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this)))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var o,t=function(e){if(o!==this._window.scrollTop()&&e>0)return this._window.scrollTop(o),void setTimeout($.proxy(t,this,e-1));setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),o=this.top,this._window.scrollTop(o),$.proxy(t,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var o=window.zenjs.popList;if(o||(o=window.zenjs.popList=[]),0===o.length){var t=$("body"),e=$("html");this.htmlPosition=e.css("position"),e.css("position","relative"),this.bodyCss=(t.prop("style")||{}).cssText,this.htmlCss=(e.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height(),"padding-bottom":0,"margin-bottom":0})}o.indexOf(this)<0&&o.push(this)},startHide:function(){var o=window.zenjs.popList,t=o.indexOf(this);t>-1&&o.splice(t,1),o.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}})}),define("bower_components/pop/popout",["require","./pop_forbid_scroll"],function(o){return o("./pop_forbid_scroll").extend({init:function(o){o=o||{},this._super(o),this.css=$.extend({transition:"opacity ease "+this.animationTime+"ms",top:"50%",left:"50%","-webkit-transform":"translate3d(-50%, -50%, 0)",transform:"translateY(-50%, -50%, 0)"},o.css||{}),this.nPopContainer.css(this.css)},_doShow:function(){$(".js-popout-close").click($.proxy(function(o){this.hide()},this)),this.nPopContainer.css("opacity",1),this.nPopContainer.show()},_doHide:function(o){this.nPopContainer.css({opacity:0})}})}),define("bower_components/pop/popout_box",["require","./popout"],function(o){var t=function(){};return o("./popout").extend({init:function(o){this._super(o),this._onOKClicked=o.onOKClicked||t,this._onCancelClicked=o.onCancelClicked||t,this.preventHideOnOkClicked=o.preventHideOnOkClicked||!1,this.width=o.width,this.setEventListener()},setEventListener:function(){this.nPopContainer.on("click",".js-ok",$.proxy(this.onOKClicked,this)),this.nPopContainer.on("click",".js-cancel",$.proxy(this.onCancelClicked,this))},_doShow:function(){this.boxCss={"border-radius":"4px",background:"white",width:this.width||"270px",padding:"15px"},this.nPopContainer.css(this.boxCss).addClass("popout-box"),this._super()},_doHide:function(o){this._super()},onOKClicked:function(o){this._onOKClicked(o),!this.preventHideOnOkClicked&&this.hide()},onCancelClicked:function(o){this._onCancelClicked(o),this.hide()}})}),define("text!wap/fenxiao/components/wxd_download_popout/template.html",[],function(){return'<style>\n.ui-download-modal h3 {\n    font-size: 20px;\n    text-align: center;\n    line-height: 20px;\n    padding: 10px 0;\n    font-weight: bold;\n}\n.ui-download-modal p {\n    padding: 0 0 25px 0;\n    text-align: center;\n    font-size: 12px;\n}\n</style>\n<div class="ui-download-modal">\n    <h3>下载有赞微小店</h3>\n    <p>免费手机开店，一键分销精选商品</p>\n    <a class="btn btn-block btn-orange-dark js-ok">立即下载</a>\n</div>\n'}),define("wap/fenxiao/components/wxd_download_popout/index",["require","exports","module","zenjs/util/ua","bower_components/pop/popout_box","text!wap/fenxiao/components/wxd_download_popout/template.html"],function(o,t,e){var i=o("zenjs/util/ua"),n=o("bower_components/pop/popout_box"),s=o("text!wap/fenxiao/components/wxd_download_popout/template.html"),a=i.isWeixin();e.exports=function(o){var t=this;this.config=o||{},this.config.url=this.config.url||"yzwxd://",s=this.config.template||s,new n({html:_.template(s),onOKClicked:function(){if(a)window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.qima.wxd";else{var o=document.createElement("iframe");o.src=t.config.url,o.style.display="none",document.body.appendChild(o),window.setTimeout(function(){document.body.removeChild(o)},3e3)}}}).render().show()}}),window.Zepto&&function(o){function t(o,t,e,i){return Math.abs(o-t)>=Math.abs(e-i)?o-t>0?"Left":"Right":e-i>0?"Up":"Down"}function e(){p=null,h.last&&(h.el.trigger("longTap"),h={})}function i(){p&&clearTimeout(p),p=null}function n(){r&&clearTimeout(r),l&&clearTimeout(l),d&&clearTimeout(d),p&&clearTimeout(p),r=l=d=p=null,h={}}function s(o){return("touch"==o.pointerType||o.pointerType==o.MSPOINTER_TYPE_TOUCH)&&o.isPrimary}function a(o,t){return o.type=="pointer"+t||o.type.toLowerCase()=="mspointer"+t}var r,l,d,p,c,h={};o(document).ready(function(){var u,w,f,g,m=0,_=0;"MSGesture"in window&&(c=new MSGesture,c.target=document.body),o(document).bind("MSGestureEnd",function(o){var t=o.velocityX>1?"Right":o.velocityX<-1?"Left":o.velocityY>1?"Down":o.velocityY<-1?"Up":null;t&&(h.el.trigger("swipe"),h.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(g=a(t,"down"))&&!s(t)||(f=g?t:t.touches[0],t.touches&&1===t.touches.length&&h.x2&&(h.x2=void 0,h.y2=void 0),u=Date.now(),w=u-(h.last||u),h.el=o("tagName"in f.target?f.target:f.target.parentNode),r&&clearTimeout(r),h.x1=f.pageX,h.y1=f.pageY,w>0&&w<=250&&(h.isDoubleTap=!0),h.last=u,p=setTimeout(e,750),c&&g&&c.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(o){(g=a(o,"move"))&&!s(o)||(f=g?o:o.touches[0],i(),h.x2=f.pageX,h.y2=f.pageY,m+=Math.abs(h.x1-h.x2),_+=Math.abs(h.y1-h.y2))}).on("touchend MSPointerUp pointerup",function(e){(g=a(e,"up"))&&!s(e)||(i(),h.x2&&Math.abs(h.x1-h.x2)>30||h.y2&&Math.abs(h.y1-h.y2)>30?d=setTimeout(function(){h.el.trigger("swipe"),h.el.trigger("swipe"+t(h.x1,h.x2,h.y1,h.y2)),h={}},0):"last"in h&&(m<30&&_<30?l=setTimeout(function(){var t=o.Event("tap");t.cancelTouch=n,h.el.trigger(t),h.isDoubleTap?(h.el&&h.el.trigger("doubleTap"),h={}):r=setTimeout(function(){r=null,h.el&&h.el.trigger("singleTap"),h={}},250)},0):h={}),m=_=0)}).on("touchcancel MSPointerCancel pointercancel",n),o(window).on("scroll",n)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){o.fn[t]=function(o){return this.on(t,o)}})}(Zepto),define("vendor/zepto/touch",function(){}),define("wap/fenxiao/components/saveImage",["bower_components/youzanjsbridge/api","zenjs/util/ua","vendor/zepto/touch"],function(o,t){var e=t.isAndroid();$("body").on("longTap","img",function(t){var i=t.target.src;e&&(i=i.replace(/https/g,"http")),o.doAction({action:"saveImage",url:i})})}),define("wap/fenxiao/components/wxd_download",["zenjs/util/ua"],function(o){var t=o.isAndroid(),e=o.isWeixin(),i=o.isIOS();$("body").on("click",".js-wxd-download",function(){if(e)window.location.href="http://a.app.qq.com/o/simple.jsp?pkgname=com.qima.wxd";else if(i){var o=document.createElement("iframe");o.src="yzwxd://",o.style.display="none",document.body.appendChild(o),window.setTimeout(function(){document.body.removeChild(o)},3e3)}else t&&(window.location.href=_global.url.cloud+"/app/online/koudaitong-wxd.apk")})}),require(["wap/components/app_h5/main","wap/fenxiao/components/wxd_download_popout/index","zenjs/util/ua","zenjs/util/args","wap/fenxiao/components/saveImage","wap/fenxiao/components/wxd_download"],function(o,t,e,i){function n(){new t({url:"yzwxd://"})}var s=e.isWxd(),a=e.isIOS(),r=e.isAndroid(),l=$(".js-news-content"),d=i.get("supplier_kdt_id",window.location.href);if(s?l.on("click",".js-operate",function(t){t.preventDefault(),t.stopImmediatePropagation();var e=$(t.target),i=e.closest(".name-card-news"),n=i.data("alias"),s=i.data("seller-goods-alias");o.gotoNative({page:"addGoods",alias:n,seller_goods_alias:s})}).on("click",".name-card-news",function(t){var e=$(t.currentTarget),i=_global.url.wap+"/showcase_fenxiao/goods?alias="+e.data("alias")+"&from=wxd",n=e.data("average-profit"),s=e.data("alias"),a=e.data("seller-goods-alias");o.gotoWebview({page:"goodsDetail",url:i,average_profit:n,alias:s,seller_goods_alias:a})}):l.on("click",".name-card-news",function(){n()}),$(".js-open-homepage").on("click",function(){s?o.gotoWebview({page:"supplierHomepage",url:window._global.url.wap+"/fenxiao/supplier/index?supplier_kdt_id="+d,name:name||""}):n()}),o.onAddGoodsSuccess(function(o){var t=o.alias,e=l.find("[data-alias="+t+"]");e.length&&(e.data("seller-goods-alias",o.seller_goods_alias),e.find(".js-operate").removeClass("add").addClass("has-added"))}),window.Logger.log({text_id:_global.image_text_id||"",seller_kdt_id:_global.kdt_id||0,target:"wxd"}),s){$(".js-news-content").on("click","a",function(t){var e=$(this),i=/(youzan|koudaitong)\.com/gi,n=e.prop("href");i.test(n)&&(t.preventDefault(),t.stopImmediatePropagation(),o.gotoWebview({page:"web",url:n}))});var p=window.getShareData(),c={title:p.title,desc:p.desc,link:p.link};a?c.imgs_url=p.img_url:r&&(c.imgs_url=[p.img_url]),o.putData("shareData",c)}}),define("main",function(){});