define("text!wap/trade/result_user/templates/express.html",[],function(){return'<div class="relative">\n    <% if (expressData.state == \'noExpress\') { %>\n        <div class="express-title c-orange">\n                无需物流\n        </div>\n    <% } else if(expressData.send_type == 21 && !expressData.is_need_display) { %>\n        <a target="_blank" class="express-detail-link"\n           href=<%= window._global.wap_url.wap + "/trade/order/expresslist?order_no="+window._global.order_no+"&kdt_id="+window._global.kdt_id %>>\n            <div class="express-title <%= expressData.is_normal_state ? \'c-green\' : \'c-red\' %>">\n                <%= expressData.status %>\n            </div>\n            <i class="express-detail-icon"></i>\n        </a>\n    <% } else if(expressData.state == \'period_buy\') { %>\n        <!-- 周期购物流 -->\n        <a target="_blank" class="express-detail-link" href=<%= window._global.wap_url.wap + "/trade/periodOrder/periodBuyExpress?order_no="+window._global.order_no+"&kdt_id="+window._global.kdt_id + "&express_id=" + expressData.express_id  + "&express_no=" + $.trim(expressData.express_no) %>>\n            <div class="express-title c-orange">\n                <%= (_global.refund_state > 0 && \'已停止配送\' ) || expressData[\'info\']%>\n            </div>\n            <p class="express-context">\n                <%= expressData.logistics %>\n            </p>\n            <p class="express-timestamp"><%= expressData.time %></p>\n            <i class="express-detail-icon"></i>\n        </a>\n    <% } else if(expressData.state == \'singleDelivery\' || !expressData.num) { %>\n        <!-- 后端认为没有num也是单包裹 达达项目 @黄利 -->\n        <!-- 单包裹发货 -->\n        <a target="_blank" class="express-detail-link" href=<%= window._global.wap_url.wap + "/trade/order/express?order_no="+window._global.order_no+"&kdt_id="+window._global.kdt_id + "&express_id=" + expressData.express_id  + "&express_no=" + $.trim(expressData.transport_no) %>>\n            <div class="express-title c-orange">\n                    <div class="pull-left">\n\n                        <%= expressData[\'express_name\'] %>&nbsp;&nbsp;&nbsp;运单编号：\n                    </div>\n                    <%= expressData.express_no %>\n            </div>\n\n            <% if (+window._global.express_track_expire === 1) { %>\n                <p class="express-context">请到物流公司官网查询详细信息</p>\n            <% } else if (expressData.context) { %>\n                <p class="express-context">\n                    【<%= expressData.status %>】<%= expressData.context %>\n                </p>\n                <p class="express-timestamp"><%= expressData.time %></p>\n            <% } else { %>\n                <p class="express-context">暂无物流详情</p>\n            <% } %>\n\n            <i class="express-detail-icon"></i>\n        </a>\n    <% } else { %>\n        <!-- 多包裹部分发货 -->\n        <a target="_blank" class="express-detail-link"\n           href=<%= window._global.wap_url.wap + "/trade/order/expresslist?order_no="+window._global.order_no+"&kdt_id="+window._global.kdt_id %>>\n            <p class="express-title c-orange">\n                <%= expressData.express_nums_str %>\n                <% if (expressData.transport_name) { %>\n                    <%= expressData.transport_name %>\n                    运单编号 <%= expressData.transport_no %>\n                <% } %>\n            </p>\n            <div class="express-context">\n                <% if (expressData.context) {%>\n                    <%= expressData.context %>\n                    <p><%= expressData.curr_delivery_time %></p>\n                <% } else { %>\n                    暂无物流详情\n                <% } %>\n            </div>\n            <i class="express-detail-icon"></i>\n        </a>\n    <% } %>\n</div>\n'}),define("wap/trade/result_user/views/express",["require","text!wap/trade/result_user/templates/express.html"],function(e){var s=e("text!wap/trade/result_user/templates/express.html"),t=_.template(s);return Backbone.View.extend({initialize:function(e){this.order_no=e.order_no,this.kdt_id=e.kdt_id,this.is_period_order=e.is_period_order,this.order_state=e.order_state,this.expressData={}},events:{"click .js-express-click":"onExpressActionClick"},render:function(){var e=this;this.order_state>4?$._ajax({url:"/v2/trade/order/orderNewExpress.json",cache:!1,type:"GET",data:{order_no:this.order_no,kdt_id:this.kdt_id,is_period_order:this.is_period_order},dataType:"json",timeout:1e4}).done(function(s){if(0===s.code){var r=s.data||[],a=r[0]||{};0!==r.length?(a=e.formatExpressData(a),e.expressData=a,e.$el.html(t({expressData:a})).removeClass("hide")):e.$el.hide()}else motify.log(s.msg)}).fail(function(e){motify.log("Oops, 网络超时请稍后重试")}):e.$el.hide()},onExpressActionClick:function(){this.expressData.state_code,[5,7].indexOf(this.expressData.state_code)},formatExpressData:function(e){return 21===e.send_type?(e.context=e.status,e.context+=" 电话："+e.phone,e.curr_delivery_time=e.time,e.express_nums_str="共 "+e.num+" 个包裹"):(e.status&&e.context&&(e.context="【"+e.status+"】 "+e.context),"splitPartDelivery"===e.state?e.express_nums_str="商家已部分发货：":"splitAllDelivery"===e.state&&(e.express_nums_str="共 "+e.num+" 个包裹")),e.transport_name=e.transport_name||e.express_name,e.transport_no=e.transport_no||e.express_no,e}})}),require(["wap/trade/result_user/views/express"],function(e){new e({el:$(".js-express-msg"),order_no:window._global.order_no,kdt_id:window._global.kdt_id,is_period_order:window._global.period_order_detail?1:0,order_state:window._global.order_state}).render()}),define("main",function(){});