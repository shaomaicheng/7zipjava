define("bower_components/ZanUtil/src/_",[],function(){"use strict";var e={},t={},n=Array.prototype,r=Object.prototype,a=r.toString,i=n.slice,o=n.forEach,c=Object.keys;e.trim=function(e){return null==e?"":String.prototype.trim.call(e)};var l=e.each=e.forEach=function(n,r,a){if(null!=n)if(o&&n.forEach===o)n.forEach(r,a);else if(n.length===+n.length){for(var i=0,c=n.length;i<c;i++)if(r.call(a,n[i],i,n)===t)return}else for(var l=e.keys(n),i=0,c=l.length;i<c;i++)if(r.call(a,n[l[i]],l[i],n)===t)return};return e.keys=c||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var n=[];for(var r in t)e.has(t,r)&&n.push(r);return n},e.has=function(e,t){return null!==e&&Object.hasOwnProperty.call(e,t)},e.extend=function(e){return l(i.call(arguments,1),function(t){if(t)for(var n in t)e[n]=t[n]}),e},l(["Arguments","Function","String","Number","Date","RegExp"],function(t){e["is"+t]=function(e){return a.call(e)=="[object "+t+"]"}}),e}),define("bower_components/ZanUtil/src/args",["require","./_"],function(e){"use strict";var t=e("./_"),n={getParameterByName:function(e,t){e=e.replace(/[[]/,"\\[").replace(/[]]/,"\\]"),t=t?"?"+t.split("#")[0].split("?")[1]:window.location.search;var n=RegExp("[?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):""},removeParameter:function(e,t){var n=e.split("?");if(n.length>=2){for(var r=encodeURIComponent(t)+"=",a=n[1].split(/[&;]/g),i=a.length;i-- >0;)a[i].lastIndexOf(r,0)!==-1&&a.splice(i,1);return e=n[0]+"?"+a.join("&")}return e},addParameter:function(){var e=function(e){var n="";for(var r in e)""!==e[r]&&(n+=t.trim(r)+"="+e[r]+"&");return n?"?"+n.slice(0,n.length-1):""};return function(n,r){if(!n||0===n.length||0===t.trim(n).indexOf("javascript"))return"";var a=n.split("#"),i=a[0].split("?"),o={};return i[1]&&t.each(i[1].split("&"),function(e,t){var n;n=e.split("="),o[n[0]]=n.slice(1).join("=")}),t.each(r||{},function(e,n){o[t.trim(n)]=encodeURIComponent(e)}),n=i[0]+e(o),a[1]?n+="#"+a[1]:n}}()};return n.get=n.getParameterByName,n.remove=n.removeParameter,n.add=n.addParameter,n}),require(["zenjs/util/ua","bower_components/ZanUtil/src/args"],function(e,t,n){new(Backbone.View.extend({events:{"click .gc-button-link.take-card-btn":"handleSubmit","click .record_details_continue":"handleContinue","click #record_details_shadow":"handleContinue"},initialize:function(){this.detailsShadow=$("#record_details_shadow")},handleSubmit:function(e){var t=this.$("#card-data").data("card-alias"),n=this.$("#card-data").data("card-record"),r=this.$(".take-card-btn").data("redirect-uri");0==r.replace(/(^\s*)|(\s*$)/g,"").length?$.ajax({url:"/v2/card/giftcard/take.json",type:"POST",dataType:"json",data:{gift_card_alias:t,give_record_id:n},beforeSend:function(){},success:function(e){e.data===!0?(motify.log("领取成功"),$(".gc-button").hide(),window.location.reload()):(motify.log("领取失败"),window.location.reload())},error:function(e,t,n){motify.log("领取失败，请稍后再试")},complete:function(e,t){}}):window.location.href=r},handleContinue:function(e){this.detailsShadow.hasClass("show")?(this.detailsShadow.removeClass("show"),$("body").removeClass("pop-fix"),$("html").removeClass("pop-fix")):(this.detailsShadow.addClass("show"),$("body").addClass("pop-fix"),$("html").addClass("pop-fix"))}}))({el:$("body")})}),define("main",function(){});