window.Zepto&&function(e){function t(e,t,o,n){return Math.abs(e-t)>=Math.abs(o-n)?e-t>0?"Left":"Right":o-n>0?"Up":"Down"}function o(){l=null,g.last&&(g.el.trigger("longTap"),g={})}function n(){l&&clearTimeout(l),l=null}function i(){s&&clearTimeout(s),u&&clearTimeout(u),c&&clearTimeout(c),l&&clearTimeout(l),s=u=c=l=null,g={}}function a(e){return("touch"==e.pointerType||e.pointerType==e.MSPOINTER_TYPE_TOUCH)&&e.isPrimary}function r(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}var s,u,c,l,p,g={};e(document).ready(function(){var d,f,h,w,m=0,y=0;"MSGesture"in window&&(p=new MSGesture,p.target=document.body),e(document).bind("MSGestureEnd",function(e){var t=e.velocityX>1?"Right":e.velocityX<-1?"Left":e.velocityY>1?"Down":e.velocityY<-1?"Up":null;t&&(g.el.trigger("swipe"),g.el.trigger("swipe"+t))}).on("touchstart MSPointerDown pointerdown",function(t){(w=r(t,"down"))&&!a(t)||(h=w?t:t.touches[0],t.touches&&1===t.touches.length&&g.x2&&(g.x2=void 0,g.y2=void 0),d=Date.now(),f=d-(g.last||d),g.el=e("tagName"in h.target?h.target:h.target.parentNode),s&&clearTimeout(s),g.x1=h.pageX,g.y1=h.pageY,f>0&&f<=250&&(g.isDoubleTap=!0),g.last=d,l=setTimeout(o,750),p&&w&&p.addPointer(t.pointerId))}).on("touchmove MSPointerMove pointermove",function(e){(w=r(e,"move"))&&!a(e)||(h=w?e:e.touches[0],n(),g.x2=h.pageX,g.y2=h.pageY,m+=Math.abs(g.x1-g.x2),y+=Math.abs(g.y1-g.y2))}).on("touchend MSPointerUp pointerup",function(o){(w=r(o,"up"))&&!a(o)||(n(),g.x2&&Math.abs(g.x1-g.x2)>30||g.y2&&Math.abs(g.y1-g.y2)>30?c=setTimeout(function(){g.el.trigger("swipe"),g.el.trigger("swipe"+t(g.x1,g.x2,g.y1,g.y2)),g={}},0):"last"in g&&(m<30&&y<30?u=setTimeout(function(){var t=e.Event("tap");t.cancelTouch=i,g.el.trigger(t),g.isDoubleTap?(g.el&&g.el.trigger("doubleTap"),g={}):s=setTimeout(function(){s=null,g.el&&g.el.trigger("singleTap"),g={}},250)},0):g={}),m=y=0)}).on("touchcancel MSPointerCancel pointercancel",i),e(window).on("scroll",i)}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.on(t,e)}})}(Zepto),define("vendor/zepto/touch",function(){}),define("wap/fenxiao/components/saveImage",["bower_components/youzanjsbridge/api","zenjs/util/ua","vendor/zepto/touch"],function(e,t){var o=t.isAndroid();$("body").on("longTap","img",function(t){var n=t.target.src;o&&(n=n.replace(/https/g,"http")),e.doAction({action:"saveImage",url:n})})}),require(["zenjs/util/ua","bower_components/youzanjsbridge/api","wap/fenxiao/components/saveImage"],function(e,t){var o=parseFloat($(".goods-header .js-goods-price").html());window._global.share.otherShareData={price:o,share_type:"goods"},t.putData("supplierInfo",{supplier_kdt_id:_global.supplier_kdt_id||""}),t.putData("goodsInfo",{goods_id:_global.goods_id}),t.putData("shareData",window.getShareData());var n=e.isIOS(),i=e.isAndroid();$(".js-share-it").on("click",function(){var e=$(".js-swp-wrap img")[0]&&$(".js-swp-wrap img")[0].src;i&&(e=e.replace(/webp/g,"jpg"));var o={action:"share",title:"推荐你看看这个",desc:$(".goods-header .title").html(),link:window.getShareLink(window.location.href),imgs_url:[e]};n&&(o.imgs_url=e),t.doAction(o)}),$(".js-share-gift").on("click",function(){var e="http://img.yzcdn.cn/public_files/2015/11/08/5fc8b4ef2d3b54901da505fb8078c4f1.gif",o={action:"share",title:"朋友圈狂欢节，狂撒亿元现金券，抢到就是赚到！",desc:"今年11.11，你的购物清单我承包了！",link:window.getShareLink(_global.lucky_money_url),imgs_url:[e]};n&&(o.imgs_url=e),t.doAction(o)})}),define("main",function(){});