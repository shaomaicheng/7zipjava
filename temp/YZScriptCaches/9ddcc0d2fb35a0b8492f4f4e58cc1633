define("bower_components/ZanUtil/src/_",[],function(){"use strict";var t={},e={},n=Array.prototype,a=Object.prototype,i=a.toString,r=n.slice,o=n.forEach,l=Object.keys;t.trim=function(t){return null==t?"":String.prototype.trim.call(t)};var c=t.each=t.forEach=function(n,a,i){if(null!=n)if(o&&n.forEach===o)n.forEach(a,i);else if(n.length===+n.length){for(var r=0,l=n.length;r<l;r++)if(a.call(i,n[r],r,n)===e)return}else for(var c=t.keys(n),r=0,l=c.length;r<l;r++)if(a.call(i,n[c[r]],c[r],n)===e)return};return t.keys=l||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var n=[];for(var a in e)t.has(e,a)&&n.push(a);return n},t.has=function(t,e){return null!==t&&Object.hasOwnProperty.call(t,e)},t.extend=function(t){return c(r.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},c(["Arguments","Function","String","Number","Date","RegExp"],function(e){t["is"+e]=function(t){return i.call(t)=="[object "+e+"]"}}),t}),define("bower_components/ZanUtil/src/args",["require","./_"],function(t){"use strict";var e=t("./_"),n={getParameterByName:function(t,e){t=t.replace(/[[]/,"\\[").replace(/[]]/,"\\]"),e=e?"?"+e.split("#")[0].split("?")[1]:window.location.search;var n=RegExp("[?&]"+t+"=([^&#]*)").exec(e);return n?decodeURIComponent(n[1].replace(/\+/g," ")):""},removeParameter:function(t,e){var n=t.split("?");if(n.length>=2){for(var a=encodeURIComponent(e)+"=",i=n[1].split(/[&;]/g),r=i.length;r-- >0;)i[r].lastIndexOf(a,0)!==-1&&i.splice(r,1);return t=n[0]+"?"+i.join("&")}return t},addParameter:function(){var t=function(t){var n="";for(var a in t)""!==t[a]&&(n+=e.trim(a)+"="+t[a]+"&");return n?"?"+n.slice(0,n.length-1):""};return function(n,a){if(!n||0===n.length||0===e.trim(n).indexOf("javascript"))return"";var i=n.split("#"),r=i[0].split("?"),o={};return r[1]&&e.each(r[1].split("&"),function(t,e){var n;n=t.split("="),o[n[0]]=n.slice(1).join("=")}),e.each(a||{},function(t,n){o[e.trim(n)]=encodeURIComponent(t)}),n=r[0]+t(o),i[1]?n+="#"+i[1]:n}}()};return n.get=n.getParameterByName,n.remove=n.removeParameter,n.add=n.addParameter,n}),require(["bower_components/ZanUtil/src/args"],function(t){new(Backbone.View.extend({events:{},initialize:function(){function t(){if(u.pic1Load&&u.pic2Load){u.drawCricle(f,h);var t=h.toDataURL();n[0].src=t}}this.pic1Load=!1,this.pic2Load=!1;var e=$(".qr-svg-warp"),n=$(".show-image"),a=$("#canvas-data"),i=a.data("title")+a.data("price"),r=a.data("imgcode"),o=a.data("cardnum"),l=a.data("nickname"),c=a.data("timeline"),d=a.data("picinfo"),h=document.createElement("canvas"),s=$(window).width();h.width=.92*s*2,h.height=950,$(h).attr("style","wdith:"+.92*s+"px;height:475px;");var f=h.getContext("2d");e.html(),window.URL||window.webkitURL||window;this.drawTitle(f,h,i),this.drawContent(f,h,r,o),this.drawInfo(f,h,r,l,c,d);var u=this,w=new Image;w.src=r,w.onload=function(){u.pic1Load=!0,t()};var g=new Image;g.src=d,g.onload=function(){u.pic2Load=!0,t()}},drawCricle:function(t,e){t.beginPath(),t.globalCompositeOperation="destination-out",t.fillStyle="blue",t.arc(0,808,14,0,2*Math.PI,!0),t.arc(e.width,808,14,0,2*Math.PI,!0),t.fill(),t.closePath()},drawInfo:function(t,e,n,a,i,r){i="有限期至: "+i,t.beginPath(),t.fillStyle="#FFF",this.drawBottomRoundRectPath(t,e.width,148,8),t.fill(),t.closePath(),t.beginPath(),t.closePath(),t.beginPath(),t.font="28px Helvetica",t.textBaseline="middle",t.textAlign="left",t.shadowBlur="0",t.fillStyle="#999999",t.fillText(a,90,876,e.width/2-90),t.closePath(),t.beginPath(),t.font="28px Helvetica",t.textBaseline="middle",t.textAlign="right",t.shadowBlur="0",t.fillStyle="#999999",t.fillText(i,e.width-24,876,e.width/2),t.closePath(),CanvasRenderingContext2D.prototype.roundRect=function(e,n,a,i,r){t.beginPath();var o=Math.min(a,i);return r>o/2&&(r=o/2),this.moveTo(e+r,n),this.arcTo(e+a,n,e+a,n+i,r),this.arcTo(e+a,n+i,e,n+i,r),this.arcTo(e,n+i,e,n,r),this.arcTo(e,n,e+a,n,r),t.closePath(),this};var o=document.createElement("canvas"),l=o.getContext("2d");o.width=90,o.height=950;var c=new Image;c.src=r,c.onload=function(e){t.beginPath(),t.arc(45,875,26,0,2*Math.PI,!0),t.strokeStyle="#D5D5D5",t.stroke(),t.closePath(),l.drawImage(c,19,847,54,54);var n=t.createPattern(o,"no-repeat");t.arc(45,875,23,0,2*Math.PI,!0),t.fillStyle=n,t.fill()}},drawTitle:function(t,e,n){t.beginPath(),t.fillStyle="linear-gradient(-223deg, #FF4459 0%, #FF5896 74%, #FF5FAB 100%)";var a=t.createLinearGradient(0,0,e.width,80);a.addColorStop(1,"#FF4459"),a.addColorStop(.26,"#FF5896"),a.addColorStop(0,"#FF5FAB"),this.drawRoundRectPath(t,e.width,148,8),t.fillStyle=a,t.fill(),t.font="36px Helvetica",t.textBaseline="middle",t.textAlign="center",t.shadowBlur="0",t.fillStyle="#FFF",t.fillText(n,e.width/2,74,e.width),t.closePath()},drawContent:function(t,e,n,a){t.beginPath(),t.fillStyle="#FFF",t.rect(0,148,e.width,660),t.fill(),t.closePath(),t.beginPath(),t.font="28px Helvetica",t.textBaseline="middle",t.textAlign="center",t.shadowBlur="0",t.fillStyle="#333",t.fillText("扫码领取礼品卡",e.width/2,690,e.width),t.closePath(),t.beginPath(),t.font="24px Helvetica",t.textBaseline="middle",t.textAlign="center",t.shadowBlur="0",t.fillStyle="#999999",t.fillText(a,e.width/2,620,e.width),t.closePath(),t.beginPath();var i=new Image;i.src=n,i.onload=function(){t.drawImage(i,(e.width-360)/2,240,360,360)},t.closePath(),t.beginPath(),function(t,e,n,a,i,r){r=void 0===r?5:r;for(var o=a-e,l=Math.floor(o/r),c=0;c<l;c++)t[c%2==0?"moveTo":"lineTo"](e+(a-e)/l*c,n+(i-n)/l*c);t.stroke()}(t,20,808,e.width-10,808,10),t.closePath()},drawRoundRectPath:function(t,e,n,a){t.beginPath(0),t.lineTo(0,n),t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2),t.lineTo(e-a,0),t.arc(e-a,a,a,3*Math.PI/2,2*Math.PI),t.lineTo(e,n),t.closePath()},drawBottomRoundRectPath:function(t,e,n,a){a*=2,t.beginPath(),t.moveTo(0,808),t.lineTo(0,808+n-a),t.arcTo(0,808+n,a,808+n,a),t.arcTo(e,808+n,e,808+n-a,a),t.lineTo(e,808),t.closePath()}}))({el:$("body")})}),define("main",function(){});