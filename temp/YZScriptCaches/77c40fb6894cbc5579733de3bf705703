define("zenjs/util/number",[],function(){return{makeRandomString:function(t){var i="",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t=t||10;for(var n=0;n<t;n++)i+=o.charAt(Math.floor(Math.random()*o.length));return i}}}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(t){var i=function(){},o=t("zenjs/events"),n=t("zenjs/util/number");return window.zenjs=window.zenjs||{},o.extend({init:function(t){this._window=$(window);var o=n.makeRandomString();$("body").append('<div id="'+o+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(t.transparent||".7")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+o),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var e=n.makeRandomString();$("body").append('<div id="'+e+'" class="'+(t.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+e),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),t.contentViewClass&&(this.contentViewClass=t.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},t.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=t.animationTime||300,this.isCanNotHide=t.isCanNotHide,this.doNotRemoveOnHide=t.doNotRemoveOnHide||!1,this.onShow=t.onShow||i,this.onHide=t.onHide||i,this.onFinishHide=t.onFinishHide||i,this.html=t.html},render:function(t){return this.renderOptions=t||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(t){t=t||{};var i=t.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),i||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}})}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(t){return window.zenjs=window.zenjs||{},t("./pop").extend({init:function(t){this._super(t),t.doNotForbidScroll||(this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this)))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var t,i=function(o){if(t!==this._window.scrollTop()&&o>0)return this._window.scrollTop(t),void setTimeout($.proxy(i,this,o-1));setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),t=this.top,this._window.scrollTop(t),$.proxy(i,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var t=window.zenjs.popList;if(t||(t=window.zenjs.popList=[]),0===t.length){var i=$("body"),o=$("html");this.htmlPosition=o.css("position"),o.css("position","relative"),this.bodyCss=(i.prop("style")||{}).cssText,this.htmlCss=(o.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height(),"padding-bottom":0,"margin-bottom":0})}t.indexOf(this)<0&&t.push(this)},startHide:function(){var t=window.zenjs.popList,i=t.indexOf(this);i>-1&&t.splice(i,1),t.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}})}),define("bower_components/pop/popup",["require","./pop_forbid_scroll"],function(t){return t("./pop_forbid_scroll").extend({init:function(t){this._super(t),this.onClickBg=t.onClickBg||function(){},this.onBeforePopupShow=t.onBeforePopupShow||function(){},this.onAfterPopupHide=t.onAfterPopupHide||function(){},this.nPopContainer.css($.extend({left:0,right:0,bottom:0,background:"white"},t.containerCss||{})),this.nPopContainer.css("opacity","0"),this.nPopContainer.on("focus","input, textarea",function(t){var i=$(this),o=$(window),n=o.scrollTop(),e=i.offset().top;(e-n<0||e-n>100)&&setTimeout(function(){var t=e-70;o.scrollTop(t)},400)})},_doShow:function(){this.nPopContainer.addClass("popup"),this.contentView&&this.contentView.height?this.height=this.contentView.height():this.contentView||(this.height=this.nPopContainer.height()),this.onBeforePopupShow(),$(".js-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.css({height:this.height+"px",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}),this.bodyPadding=$("body").css("padding"),$("body").css("padding","0px"),setTimeout($.proxy(function(){this.nPopContainer.css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"all ease "+this.animationTime+"ms",transition:"all ease "+this.animationTime+"ms",opacity:1})},this)),setTimeout($.proxy(function(){this.contentView&&this.contentView.onAfterPopupShow&&this.contentView.onAfterPopupShow()},this),this.animationTime)},_doHide:function(t){this.nPopContainer.css({transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)",opacity:0}),setTimeout($.proxy(function(){$("body").css("padding",this.bodyPadding),this.onAfterPopupHide()},this),this.animationTime)}})}),define("wap/ump/fission_tip/model",["zenjs/util/args"],function(t){return Backbone.Model.extend({url:window._global.url.wap+"/ump/fission/order_activity.json",default:{fetchTimes:3},getActivityInfo:function(){var i=this,o=window._global.order_no||t.get("order_no");this.set("orderNo",o),$._ajax({url:this.url,type:"post",dataType:"json",data:{order_no:o},xhrFields:{withCredentials:!0},crossDomain:!0}).done(function(t){0===t.code&&t.hasOwnProperty("data")&&(i.set("data",t.data),i.trigger("renderTipPage"))}).fail(function(t){var o=i.get("fetchTimes");--o>0&&(i.set("fetchTimes",o),i.getActivityInfo())})}})}),define("text!wap/ump/fission_tip/template/tip.html",[],function(){return'<div class="fission-share">\n    <p class="title">送你<%= quantity %>张优惠券</p>\n    <i class="icon-close"></i>\n    <a href="<%= shareUrl %>" class="fission-btn">去领取</a>\n</div>\n'}),define("wap/ump/fission_tip/views/tip",["text!wap/ump/fission_tip/template/tip.html"],function(t){return Backbone.View.extend({template:_.template(t),initialize:function(t){this.onHide=t.onHide},render:function(t){this.$el.html(this.template(t))},events:{"click .icon-close":"onHide"}})}),require(["bower_components/pop/popup","wap/ump/fission_tip/model","wap/ump/fission_tip/views/tip"],function(t,i,o){new(Backbone.View.extend({shareUrl:window._global.url.wap+"/ump/fission/list",initialize:function(){this.model=new i,this.model.getActivityInfo(),this.listenTo(this.model,"renderTipPage",this.render)},render:function(){this.popup=new t({contentViewClass:o,contentViewOptions:{onHide:this.hide.bind(this)}}).render({quantity:this.model.get("data").quantity,shareUrl:this.shareUrl+"?order_no="+this.model.get("orderNo")}).show()},hide:function(){if(!this.popup)return!1;this.popup.hide()}}))}),define("main",function(){});