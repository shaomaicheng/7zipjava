require(["zenjs/util/ua","bower_components/youzanjsbridge/api"],function(i,n){"use strict";var a=window.wx;new(Backbone.View.extend({initialize:function(i){this.clickSyncTag=0},events:{"click .js-sync-weixin":"onSyncWeixinClick"},onSyncWeixinClick:function(n){n.preventDefault(),i.isWeixin()?this.addCardWithSDK():"youzanmars"==_global.platform?this.clickSyncTag?motify.log("点击过于频繁，请稍后再试"):(this.clickSyncTag=1,setTimeout(function(){this.clickSyncTag=0},3e3),this.addCardInApp()):this.showQrcode()},showQrcode:function(){this.$(".js-wx-qccode-area").show()},addCardWithSDK:function(){var i=this,n=window._global;a&&a.addCard({cardList:[{cardId:n.card_id||"",cardExt:n.jssdk_add_card_data||""}],complete:function(i){},fail:function(n){i.showQrcode()},cancel:function(n){i.showQrcode()},success:function(i){motify.log("同步成功")}})},addCardInApp:function(){var i=window._global;this.$(".js-sync-weixin").prop("disabled",!0),n.on("WXAddToCardPackageFinish",function(){window.location.reload()}),n.call("addToWXCardPackage",{cardId:i.card_id||"",cardExt:i.jssdk_add_card_data||""})}}))({el:$("body")})}),define("main",function(){});