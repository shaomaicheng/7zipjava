require(["zenjs/util/args"],function(e){var t=!1,n=window._global.confirm,o=$(".js-vertify-code-btn"),i=$(".js-btn-pay"),d=function e(t){t>0?(o.attr("disabled","disabled"),o.text("重新发送("+t+"秒)"),setTimeout(function(){e(t-1)},1e3)):(o.removeAttr("disabled"),o.text(o.data("text")))},a=function(){var e=1;return function(){t||"disabled"==o.attr("disabled")||$._ajax({url:n.sendSmsUrl,type:"POST",dataType:"json",timeout:5e3,data:{trade_no:n.outTradeNo,bind:n.bindId,verfityTimes:e++},beforeSend:function(){t=!0,o.text("正在发送").attr("disabled","disabled")},success:function(e){0==e.code?d(60):motify.log(e.msg)},error:function(e,t,n){},complete:function(e,n){t=!1}})}}(),r=function(){var e=$(".js-verify-code").val().trim();if(!e||0==e.length)return void motify.log("请输入验证码");t||$._ajax({url:n.agreeConfirmUrl,type:"POST",dataType:"json",timeout:5e3,data:{trade_no:n.outTradeNo,bind:n.bindId,real_pay:n.real_pay,verify:e},beforeSend:function(){t=!0,i.attr("disabled","disabled"),i.html("正在努力加载，请稍等...")},success:function(e){0==e.code?window.location.href=e.data.url:motify.log(e.msg)},error:function(e,t,n){},complete:function(e,n){t=!1,setTimeout(function(){i.removeAttr("disabled"),i.html("确定支付")},2e3)}})};n.sendSmsCountdown>0?d(n.sendSmsCountdown):a(),$(".btn-vertify-code-response-area").click(a),$(".js-btn-pay").click(r)}),define("main",function(){});