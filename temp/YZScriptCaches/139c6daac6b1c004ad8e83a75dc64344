define("bower_components/waterfall/pager",["require","zenjs/events"],function(t){var i=t("zenjs/events"),e=function(){};return i.extend({init:function(t){this.$el||(this.$el=$(t.el||t.$el||"<div></div>"),this.el=this.$el[0]),this.nLoading=t.loadingHTML?$(t.loadingHTML).addClass("loading-more"):$('<div class="loading-more"><span></span></div>'),this.nList=this.$el.find(".js-list"),0===this.nList.length&&(this.nList=$('<div class="js-list b-list"></div>'),this.$el.append(this.nList)),"number"==typeof t.total&&(this.total=t.total),this.offset=t.offset||300,this.scrollDirection="down",this.pageIndex=t.pageIndex||0,this.perPage=t.perPage||10,this.postData=t.postData||{},this.checkSize=!0,"boolean"==typeof t.checkSize&&(this.checkSize=t.checkSize),this.idName=t.idName||"id",t.idValue&&(this.idValue=t.idValue),this.jsonKeys=t.jsonKeys||{},this.finishedHTML=t.finishedHTML,this.finishedText=t.finishedText,this.emptyHTML=t.emptyHTML||"",this.emptyText=t.emptyText||"",this.getExtrPostData=t.getExtrPostData||e,this.onFetchError=t.onFetchError||e,this.onListEmpty=this.onListEmpty||t.onEmpty||this._onListEmpty,this.on("finished",t.onFinished||e),this.on("after:list:load",t.onAfterListLoad||t.onDataLoad||e),this.extraData={},this.scrollContainer=t.scrollContainer?$(t.scrollContainer):$("body"),this.scrollEventAccepter=t.scrollEventAccepter?$(t.scrollEventAccepter):$(t.scrollContainer||window),this._onScroll=$.proxy(this.onScroll,this),this.bindScrollFunc()},$:function(t){return this.$el.find(t)},onScroll:function(){function t(){var t=this.nList.offset(),i=this.scrollContainer.offset();return{left:t.left-i.left||0,top:t.top-i.top||0}}return function(){if(!(this.sleeping||this.finished||this.fetching)){if(0===this.total||this.total&&this.total<=this.pageIndex*this.perPage)return void this.doFinishLoading();var i=t.call(this);"down"===this.scrollDirection&&this.nList.height()+i.top-this.scrollEventAccepter.height()-this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore(),"up"===this.scrollDirection&&this.scrollContainer.scrollTop()<this.offset&&this.fetchMore&&this.fetchMore()}}}(),fetchMore:function(){return this.sleeping||this.finished||this.fetching?this:(this.showLoading(),this.fetching=!0,this._fetchMore&&this._fetchMore.call(this),this)},onFetchMoreSuccess:function(){this.hideLoading(),this.fetching=!1,this._onFetchMoreSuccess.apply(this,arguments)},fetchRender:function(){return this.fetchMore(),this},_onFetchMoreError:function(){this.fetching=!1,this.hideLoading(),this.onFetchError()},doFinishLoading:function(t){this.finished=!0,this.fetching=!1,this.hideLoading(),this.$el.find(".list-finished").remove(),this.triggerMethod&&this.triggerMethod("finished",this.collection,t)},bindScrollFunc:function(){var t=this;this.scrollFunc&&this.unbindScrollFunc(),this.scrollFunc=function(){t.scrollTimeout&&clearTimeout(t.scrollTimeout),t.scrollTimeout=setTimeout(t._onScroll,200)},this.scrollEventAccepter.on("scroll",this.scrollFunc)},unbindScrollFunc:function(){this.scrollEventAccepter.off("scroll",this.scrollFunc),this.scrollFunc=null},doSleep:function(){this.sleeping=!0,this.unbindScrollFunc()},doWake:function(){this.sleeping=!1,this.bindScrollFunc(),this.fetchMore()},showLoading:function(){this.hasFetching=!0,this.$el.append(this.nLoading)},hideLoading:function(){this.nLoading.remove()},getFinishHtml:function(){return this.finishedHTML?$(this.finishedHTML).addClass("list-finished"):'<div class="list-finished">'+(this.finishedText||"已经没有更多了")+"</div>"},setExtraData:function(t){$.extend(this.extraData,t)},resetWaterfall:function(t){this.finished===!0&&this.$(".list-finished").remove(),this.removeAll&&this.removeAll(),this.nList.empty(),this.collection&&this.collection.reset([],{silent:!0}),this.listEl&&this.listEl.empty(),this.finished=!1,t&&t.pageIndex?this.pageIndex=t.pageIndex:this.pageIndex=0,this.idValue=void 0},_onListEmpty:function(){if(!this.fetching){var t;this.emptyHTML?t=$(this.emptyHTML).addClass("list-finished"):this.emptyText&&(t='<div class="list-finished">'+this.emptyText+"</div>"),this.$el.append(t)}},destroy:function(){this.doSleep(),this.$el.remove(),this.unbindScrollFunc()},remove:function(){this.destroy()}})}),define("zenjs/backbone/base_view",["require","backbone","../core/trigger_method"],function(t){var i=t("backbone"),e=t("../core/trigger_method");return i.View.extend({clean:function(){return this.stopListening(),this},triggerMethod:e})}),define("bower_components/zenlist/list",["require","exports","module","zenjs/backbone/base_view"],function(t,i,e){var s=function(){},o=t("zenjs/backbone/base_view");e.exports=o.extend({initialize:function(t){return this.options=t=t||{},this.items=[],this.itemView=t.itemView,this.itemOptions=t.itemOptions||{},this.collection=t.collection,this.onAfterListChange=t.onAfterListChange||s,this.onAfterListLoad=t.onAfterListLoad||s,this.onAfterListDisplay=t.onAfterListDisplay||s,this.onListEmpty=t.onListEmpty||t.onEmptyList||this._onListEmpty,this.onItemClick=t.onItemClick||s,this.onViewItemAdded=t.onViewItemAdded||s,this.displaySize=t.displaySize||-1,this.emptyHTML=t.emptyHTML||"",this.emptyText=t.emptyText||"列表为空",this},render:function(t){return this.displaySize=(t||{}).displaySize==-1?-1:this.displaySize,this.clean(),this._setupListeners(),this.addAll(),this.onAfterListDisplay({list:this.collection}),this},fetchRender:function(t){return this.collection.fetch({data:t,success:_(function(t,i){this.render(),this.onAfterListLoad(this.collection,i),this.onFetchSuccess&&this.onFetchSuccess()}).bind(this),error:_.bind(function(){this.onAfterListLoad(this.collection,response)},this)}),this},_setupListeners:function(){this.collection&&(this.stopListening(this.collection),this.listenTo(this.collection,"add",this.addItem,this),this.listenTo(this.collection,"reset sort",this.render,this),this.listenTo(this.collection,"remove",this.onItemRemoved,this))},addItemListeners:function(t){var i=this;this.listenTo(t,"all",function(){var i="item:"+arguments[0],e=_.toArray(arguments);e.splice(0,1),e.unshift(i,t),this.trigger.apply(this,e),"item:click"==i&&this.onItemClick()}),this.listenTo(t.model,"change",function(){i.onAfterListChange({list:this.collection})})},addAll:function(){0===this.collection.length?this.fetching||this.triggerMethod("list:empty"):this.collection.each(function(t){this.addItem(t)},this)},removeAll:function(){for(var t=this.items.length-1;t>=0;t--)this.removeView(this.items[t]);this.onAfterListChange({list:this.collection})},addItem:function(t,i,e){if(!(this.displaySize>=0&&this.items.length>=this.displaySize)){1==this.collection.length&&(this.listEl||this.$el).html("");var s=new this.itemView(_.extend({},this.options.itemOptions,{model:t,index:this.collection.indexOf(t)}));this.items.push(s),this.addItemListeners(s),s.render(),this.onViewItemAdded({list:this.items,viewItem:s,model:t});return 0===(e||{}).at?(this.listEl||this.$el).prepend(s.el):(this.listEl||this.$el).append(s.el),s}},removeItem:function(t){var i=this.getViewByModel(t);i&&this.removeView(i)},removeView:function(t){var i;this.stopListening(t),t&&(this.stopListening(t.model),t.remove(),i=this.items.indexOf(t),this.items.splice(i,1)),0===this.collection.length&&(this.fetching||this.triggerMethod("list:empty"))},onItemRemoved:function(t){this.onAfterListChange({list:this.collection,action:"remove",model:t}),this.removeItem(t)},getViewByModel:function(t){return _.find(this.items,function(i,e){return i.model===t})},dispatchEventToAllViews:function(t,i){for(var e=this.items.length-1;e>=0;e--)this.items[e].trigger(t,i)},remove:function(){o.prototype.remove.call(this,arguments),this.removeAll(),this.collection.reset(),delete this.collection},clean:function(){o.prototype.clean.call(this,arguments),this.removeAll(),(this.listEl||this.$el).html(""),this.stopListening(this.collection)},_onListEmpty:function(){this.$el.html(this.emptyHTML||(this.emptyText?'<p style="text-align:center;line-height:60px;">'+this.emptyText+"</p>":""))}})}),define("bower_components/waterfall/waterfall",["require","./pager","bower_components/zenlist/list"],function(t){var i=t("./pager"),e=t("bower_components/zenlist/list"),s=function(){};return i.extend({init:function(t){this._super(t),this.collection=t.collection,this.listEl=this.getListViewEl(),this.list=new e($.extend({},t,{el:this.listEl,collection:this.collection,onListEmpty:s})).render(),this.on("finished",this._doFinishLoading)},getListViewEl:function(){return this.nList},_fetchMore:function(){var t={};this.idValue&&(t[this.idName]=this.idValue),t[this.jsonKeys.perPage||"perpage"]=this.perPage,t[this.jsonKeys.pageIndex||"page"]=this.pageIndex+1;var i=this.getExtrPostData?this.getExtrPostData():{};this.collection.fetch({data:$.extend(t,this.postData,i,this.extraData),success:$.proxy(this.onFetchMoreSuccess,this),error:$.proxy(this.onFetchError,this),update:!0,remove:!1})},_onFetchMoreSuccess:function(t,i){this.pageIndex++,this.triggerMethod("after:list:load",{collection:t,response:i});var e=this.collection.parse(i);if(0===e.length||this.checkSize&&e.length<this.perPage)return void this.doFinishLoading();var s=_.last(this.collection.models);s&&(this.idValue=s.get(this.idName)),this.onScroll()},_onAfterListLoad:function(){var t=_.last(this.collection.models);t&&(this.idValue=t.get(this.idName))},_doFinishLoading:function(){if(this.collection.length>0){if(this.hasFetching&&this.pageIndex>1){var t=this.getFinishHtml();this.$el.append(t)}}else this.triggerMethod("list:empty")},addTopItem:function(t){this.collection.unshift(t)},addBottomItem:function(t){this.finished===!0&&this.$(".list-finished").remove(),this.collection.add(t)}})}),define("wap/components/image_list/models/model",["require","exports","module"],function(t,i,e){e.exports=Backbone.Model.extend({defaults:function(){return{}},initialize:function(t){this.options=t||{}}})}),define("wap/components/image_list/collections/main",["require","exports","module","wap/components/image_list/models/model"],function(t,i,e){var s=t("wap/components/image_list/models/model");e.exports=Backbone.Collection.extend({model:s,paramUrl:function(){var t=this.options.url;if(t)return t=t+"?"+$.param(this.options.paramOptions)},initialize:function(t,i){this.options=i||{},this.url=this.paramUrl()},parse:function(t){return this.total=parseInt(t.data&&t.data.count,10),t.data&&t.data.list||[]}})}),define("text!wap/components/image_list/templates/item.html",[],function(){return'<div class="block-item-header js-homepage">\n    <span class="icon home"></span>\n    <span class="header"><%= team_name %></span>\n    <% if(is_certificate == \'1\'){ %>\n    <span class="icon cer"></span>\n    <% }%>\n    <% if(is_secured_transactions == \'1\'){ %>\n    <span class="icon danbao"></span>\n    <% } %>\n    <% if(is_margin == \'1\'){ %>\n    <span class="icon money"></span>\n    <% } %>\n    <% if(is_fans == \'1\') { %>\n      <a class="btn follow-btn js-cancel-follow">已关注</a>\n    <% } else { %>\n      <a class="btn btn-green follow-btn js-follow">关注</a>\n    <% } %>\n</div>\n<ul class="images-region clearfix">\n    <li class="image-item js-goto-detail" data-alias="<%= top_goods_list[0] && top_goods_list[0].alias %>">\n        <img src="<%= top_goods_list[0] && top_goods_list[0][\'image_url\'] || defaultImage %>">\n    </li>\n    <li class="image-item js-goto-detail" data-alias="<%= top_goods_list[1] && top_goods_list[1].alias %>">\n        <img src="<%= top_goods_list[1] && top_goods_list[1][\'image_url\'] || defaultImage %>">\n    </li>\n    <li class="image-item js-goto-detail" data-alias="<%= top_goods_list[2] && top_goods_list[2].alias %>">\n        <img src="<%= top_goods_list[2] && top_goods_list[2][\'image_url\'] || defaultImage %>">\n    </li>\n    <li class="image-item js-goto-detail" data-alias="<%= top_goods_list[3] && top_goods_list[3].alias %>">\n        <img src="<%= top_goods_list[3] && top_goods_list[3][\'image_url\'] || defaultImage %>">\n    </li>\n</ul>\n\n\n\n'}),define("wap/components/image_list/views/item",["require","exports","module","bower_components/youzanjsbridge/api","text!wap/components/image_list/templates/item.html"],function(t,i,e){var s=t("bower_components/youzanjsbridge/api"),o=t("text!wap/components/image_list/templates/item.html");e.exports=Backbone.View.extend({className:"block-item js-goto-home",defaults:{defaultImage:"http://b.yzcdn.cn/v2/image/default_cover.jpg",kdtIdName:"kdt_id"},events:{"click .js-follow":"follow","click .js-cancel-follow":"cancelFollow","click .js-homepage":"goSupplierHomepage","click .js-goto-detail":"onGotoDetail"},initialize:function(t){this.options=t||{},this.template=t.template?_.template(t.template):_.template(o),this.accessToken=this.options.access_token,this.supplierKdtId=this.model.get(t.kdtIdName||this.defaults.kdtIdName),this.accessToken&&this.supplierKdtId?(this.render(),this.listenTo(this.model,"change",this.render)):motify.log("参数错误")},render:function(){return this.$el.html(this.template(_.extend(this.defaults,this.model.toJSON()))),this},onGotoDetail:function(t){t.preventDefault(),t.stopImmediatePropagation();var i=$(t.currentTarget).data("alias");i?s.gotoWebview({page:"web",url:_global.wap_url.wap+"/showcase_fenxiao/goods/active?alias="+i}):s.gotoWebview({page:"supplierHomepage",url:_global.wap_url.wap+"/fenxiao/supplier/index?supplier_kdt_id="+this.supplierKdtId,name:""})},follow:function(t){t.preventDefault(),t.stopImmediatePropagation();var i=this;$._ajax({url:"/v2/fenxiao/supplier/follow.json",type:"POST",data:{supplier_kdt_id:this.supplierKdtId,access_token:this.accessToken},success:function(t){0===t.code?(motify.log("关注成功"),i.model.set({is_fans:1})):motify.log(t.msg)},error:function(){motify.log("网络错误")}})},cancelFollow:function(t){t.preventDefault(),t.stopImmediatePropagation();var i=this;$._ajax({url:"/v2/fenxiao/supplier/follow.json",type:"DELETE",data:{supplier_kdt_id:this.supplierKdtId,access_token:this.accessToken},success:function(t){0===t.code?(motify.log("取消关注成功"),i.model.set({is_fans:0})):motify.log(t.msg)},error:function(){motify.log("网络错误")}})},goSupplierHomepage:function(){s.gotoWebview({page:"supplierHomepage",url:window._global.wap_url.wap+"/fenxiao/supplier/index?supplier_kdt_id="+this.supplierKdtId,name:""})}})}),define("wap/components/image_list/main",["require","exports","module","bower_components/waterfall/waterfall","wap/components/image_list/collections/main","wap/components/image_list/views/item"],function(t,i,e){var s=t("bower_components/waterfall/waterfall"),o=t("wap/components/image_list/collections/main"),n=t("wap/components/image_list/views/item"),l=function(){};e.exports=Backbone.View.extend({defaults:{model:[],itemView:n,ItemCollection:o,collectionOptions:{url:"",paramOptions:{}}},initialize:function(t){this.options=$.extend(!0,{},this.defaults,t),this.render()},renderWaterFall:function(){var t=this;this.waterfall=new s({el:t.options.el,itemView:t.options.itemView,itemOptions:t.options.itemOptions||{},collection:new t.options.ItemCollection(t.options.model,t.options.collectionOptions),finishedText:t.options.finishedText||"",emptyText:t.options.emptyText||"列表为空",emptyHTML:t.options.emptyHTML||"",loadingHTML:t.options.loadingHTML||"",perPage:t.options.perPage||10,onFinished:t.options.onFinished||l,onEmpty:t.options.onEmpty||l,offset:600,checkSize:!1}).fetchRender(),this.waterfall.on("list:empty",this.options.onEmpty||l)},render:function(){return this.renderWaterFall(),this}})}),define("zenjs/util/number",[],function(){return{makeRandomString:function(t){var i="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t=t||10;for(var s=0;s<t;s++)i+=e.charAt(Math.floor(Math.random()*e.length));return i}}}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(t){var i=function(){},e=t("zenjs/events"),s=t("zenjs/util/number");return window.zenjs=window.zenjs||{},e.extend({init:function(t){this._window=$(window);var e=s.makeRandomString();$("body").append('<div id="'+e+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(t.transparent||".7")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+e),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var o=s.makeRandomString();$("body").append('<div id="'+o+'" class="'+(t.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+o),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),t.contentViewClass&&(this.contentViewClass=t.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},t.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=t.animationTime||300,this.isCanNotHide=t.isCanNotHide,this.doNotRemoveOnHide=t.doNotRemoveOnHide||!1,this.onShow=t.onShow||i,this.onHide=t.onHide||i,this.onFinishHide=t.onFinishHide||i,this.html=t.html},render:function(t){return this.renderOptions=t||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(t){t=t||{};var i=t.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),i||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}})}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(t){return window.zenjs=window.zenjs||{},t("./pop").extend({init:function(t){this._super(t),t.doNotForbidScroll||(this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this)))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var t,i=function(e){if(t!==this._window.scrollTop()&&e>0)return this._window.scrollTop(t),void setTimeout($.proxy(i,this,e-1));setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),t=this.top,this._window.scrollTop(t),$.proxy(i,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var t=window.zenjs.popList;if(t||(t=window.zenjs.popList=[]),0===t.length){var i=$("body"),e=$("html");this.htmlPosition=e.css("position"),e.css("position","relative"),this.bodyCss=(i.prop("style")||{}).cssText,this.htmlCss=(e.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height(),"padding-bottom":0,"margin-bottom":0})}t.indexOf(this)<0&&t.push(this)},startHide:function(){var t=window.zenjs.popList,i=t.indexOf(this);i>-1&&t.splice(i,1),t.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}})}),define("bower_components/pop/popout",["require","./pop_forbid_scroll"],function(t){return t("./pop_forbid_scroll").extend({init:function(t){t=t||{},this._super(t),this.css=$.extend({transition:"opacity ease "+this.animationTime+"ms",top:"50%",left:"50%","-webkit-transform":"translate3d(-50%, -50%, 0)",transform:"translateY(-50%, -50%, 0)"},t.css||{}),this.nPopContainer.css(this.css)},_doShow:function(){$(".js-popout-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.css("opacity",1),this.nPopContainer.show()},_doHide:function(t){this.nPopContainer.css({opacity:0})}})}),define("bower_components/pop/popout_box",["require","./popout"],function(t){var i=function(){};return t("./popout").extend({init:function(t){this._super(t),this._onOKClicked=t.onOKClicked||i,this._onCancelClicked=t.onCancelClicked||i,this.preventHideOnOkClicked=t.preventHideOnOkClicked||!1,this.width=t.width,this.setEventListener()},setEventListener:function(){this.nPopContainer.on("click",".js-ok",$.proxy(this.onOKClicked,this)),this.nPopContainer.on("click",".js-cancel",$.proxy(this.onCancelClicked,this))},_doShow:function(){this.boxCss={"border-radius":"4px",background:"white",width:this.width||"270px",padding:"15px"},this.nPopContainer.css(this.boxCss).addClass("popout-box"),this._super()},_doHide:function(t){this._super()},onOKClicked:function(t){this._onOKClicked(t),!this.preventHideOnOkClicked&&this.hide()},onCancelClicked:function(t){this._onCancelClicked(t),this.hide()}})}),define("text!wap/fenxiao/market/index/templates/item.html",[],function(){return'<div class="block-item-header js-homepage">\n    <img class="logo" src="<%= logo %>" alt="Logo">\n    <span class="header"><%= team_name %></span>\n    <% if(discount && discount < 10){ %>\n      <span class="discount-tip">最低<%= discount %>折</span>\n    <% } %>\n</div>\n<ul class="images-region clearfix">\n    <li class="image-item js-goto-detail" data-alias="<%= goods_list[0] && goods_list[0].alias %>">\n        <div style="background-image:url(\'<%= goods_list[0] && goods_list[0][\'image_url\'] || defaultImage %>\')"></div>\n        <% if(goods_list[0]){ %>\n        <p class="discount-price">成本价: <span>¥<%= goods_list[0] && goods_list[0][\'fx_discount_price\'] %></span></p>\n        <p class="price">¥<%= goods_list[0] && goods_list[0][\'fx_price\'] %></p>\n        <% } %>\n    </li>\n    <li class="image-item js-goto-detail" data-alias="<%= goods_list[1] && goods_list[1].alias %>">\n        <div style="background-image:url(\'<%= goods_list[1] && goods_list[1][\'image_url\'] || defaultImage %>\')"></div>\n        <% if(goods_list[1]){ %>\n        <p class="discount-price">成本价: <span>¥<%= goods_list[1] && goods_list[1][\'fx_discount_price\'] %></span></p>\n        <p class="price">¥<%= goods_list[1] && goods_list[1][\'fx_price\'] %></p>\n        <% } %>\n    </li>\n    <li class="image-item js-goto-detail" data-alias="<%= goods_list[2] && goods_list[2].alias %>">\n        <div style="background-image:url(\'<%= goods_list[2] && goods_list[2][\'image_url\'] || defaultImage %>\')"></div>\n        <% if(goods_list[2]){ %>\n        <p class="discount-price">成本价: <span>¥<%= goods_list[2] && goods_list[2][\'fx_discount_price\'] %></span></p>\n        <p class="price">¥<%= goods_list[2] && goods_list[2][\'fx_price\'] %></p>\n        <% } %>\n    </li>\n</ul>\n\n\n'}),define("text!wap/fenxiao/supplier/discount/templates/topItem.html",[],function(){return'<div class="block-item-header js-homepage">\n    <span class="icon home"></span>\n    <span class="header"><%= teamName %></span>\n    <% if(is_fans == \'1\') { %>\n      <a class="btn follow-btn js-cancel-follow">已关注</a>\n    <% } else { %>\n      <a class="btn btn-green follow-btn js-follow">关注</a>\n    <% } %>\n</div>\n\n<ul class="images-region clearfix">\n    <li class="image-item js-goto-detail" data-alias="<%= goods[0] && goods[0].alias %>"><img src="<%= goods[0] && goods[0][\'image_url\'] || defaultImage %>"></li>\n    <li class="image-item js-goto-detail" data-alias="<%= goods[1] && goods[1].alias %>"><img src="<%= goods[1] && goods[1][\'image_url\'] || defaultImage %>"></li>\n    <li class="image-item js-goto-detail" data-alias="<%= goods[2] && goods[2].alias %>"><img src="<%= goods[2] && goods[2][\'image_url\'] || defaultImage %>"></li>\n    <li class="image-item js-goto-detail" data-alias="<%= goods[3] && goods[3].alias %>">\n        <img src="<%= goods[3] && goods[3][\'image_url\'] || defaultImage %>">\n    </li>\n</ul>\n'}),define("text!wap/fenxiao/supplier/discount/templates/discount_tip.html",[],function(){return'<h3 class="discount-title">如何享受折扣优惠</h3>\n<ul class="discount-region">\n    <li>\n        <span class="num">1.</span>\n        <p class="detail">为你设置过折扣优惠的供货商都会出现在这里，你可以以更低的成本价分销这些供货商的商品。</p>\n    </li>\n    <li>\n        <span class="num">2.</span>\n        <p class="detail">供货商更愿意为分销能力强的分销商设置折扣优惠。</p>\n    </li>\n    <li>\n        <span class="num">3.</span>\n        <p class="detail">当你具备一定的分销能力时，可以主动联系供货商为你设置折扣优惠。</p>\n    </li>\n</ul>\n<button class="js-cancel cancel">关闭</button>\n'}),require(["zenjs/util/ua","zenjs/util/args","wap/components/image_list/main","bower_components/pop/popout_box","bower_components/youzanjsbridge/api","text!wap/fenxiao/market/index/templates/item.html","text!wap/fenxiao/supplier/discount/templates/topItem.html","text!wap/fenxiao/supplier/discount/templates/discount_tip.html"],function(t,i,e,s,o,n,l,a){var h=_global.access_token||i.get("access_token");new(Backbone.View.extend({initialize:function(t){this.options=t||{},this.initGoto(),this.render()},events:{"click .js-show-discount-popup":"showDiscountTip"},initGoto:function(){var e=_global.access_token||i.get("access_token");$("body").on("click",".js-goto",function(){var s=$(this).data(),n=s.link_url;if(e&&(n=i.add(n,{access_token:e})),t.isWxd())switch(s.method){case"gotoWebview":o.gotoWebview({page:s.page,url:n});break;default:o.gotoWebview({page:"web",url:n})}else window.location.href=n})},showDiscountTip:function(){this.discountPopout||(this.discountPopout=new s({isCanNotHide:!1,doNotRemoveOnHide:!0,html:_.template(a)()}),this.discountPopout.render()),this.discountPopout.show()},renderImageList:function(){var t=this;$("#loading-more").css("display","block"),new e({collectionOptions:{url:"/v2/fenxiao/seller/supplierlist.json",paramOptions:{access_token:h}},itemOptions:{access_token:h,template:n},el:"#discount-list",loadingHTML:'<div style="display:none"><div>',emptyText:"关注更多优质供货商",finishedText:"关注更多优质供货商",onFinished:function(){$("#discount-loading-more").css("display","none"),t.renderTopImageList()},onEmpty:function(){$("#loading-more").css("display","none")}})},renderTopImageList:function(){$(".more-supplier").css({display:"block"}),$("#loading-more").css("display","block"),new e({collectionOptions:{url:"/v2/fenxiao/supplier/recommend.json",paramOptions:{access_token:h}},itemOptions:{access_token:h,template:l},el:"#top-list",loadingHTML:'<div style="display:none"><div>',onFinished:function(){$("#loading-more").css("display","none")},onEmpty:function(){$("#loading-more").css("display","none")}})},render:function(){return this.renderImageList(),this}}))({el:"body"})}),define("main",function(){});