define("bower_components/ZanUtil/src/_",[],function(){"use strict";var t={},e={},i=Array.prototype,n=Object.prototype,o=n.toString,s=i.slice,r=i.forEach,c=Object.keys;t.trim=function(t){return null==t?"":String.prototype.trim.call(t)};var a=t.each=t.forEach=function(i,n,o){if(null!=i)if(r&&i.forEach===r)i.forEach(n,o);else if(i.length===+i.length){for(var s=0,c=i.length;s<c;s++)if(n.call(o,i[s],s,i)===e)return}else for(var a=t.keys(i),s=0,c=a.length;s<c;s++)if(n.call(o,i[a[s]],a[s],i)===e)return};return t.keys=c||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var i=[];for(var n in e)t.has(e,n)&&i.push(n);return i},t.has=function(t,e){return null!==t&&Object.hasOwnProperty.call(t,e)},t.extend=function(t){return a(s.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},a(["Arguments","Function","String","Number","Date","RegExp"],function(e){t["is"+e]=function(t){return o.call(t)=="[object "+e+"]"}}),t}),define("bower_components/ZanUtil/src/args",["require","./_"],function(t){"use strict";var e=t("./_"),i={getParameterByName:function(t,e){t=t.replace(/[[]/,"\\[").replace(/[]]/,"\\]"),e=e?"?"+e.split("#")[0].split("?")[1]:window.location.search;var i=RegExp("[?&]"+t+"=([^&#]*)").exec(e);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},removeParameter:function(t,e){var i=t.split("?");if(i.length>=2){for(var n=encodeURIComponent(e)+"=",o=i[1].split(/[&;]/g),s=o.length;s-- >0;)o[s].lastIndexOf(n,0)!==-1&&o.splice(s,1);return t=i[0]+"?"+o.join("&")}return t},addParameter:function(){var t=function(t){var i="";for(var n in t)""!==t[n]&&(i+=e.trim(n)+"="+t[n]+"&");return i?"?"+i.slice(0,i.length-1):""};return function(i,n){if(!i||0===i.length||0===e.trim(i).indexOf("javascript"))return"";var o=i.split("#"),s=o[0].split("?"),r={};return s[1]&&e.each(s[1].split("&"),function(t,e){var i;i=t.split("="),r[i[0]]=i.slice(1).join("=")}),e.each(n||{},function(t,i){r[e.trim(i)]=encodeURIComponent(t)}),i=s[0]+t(r),o[1]?i+="#"+o[1]:i}}()};return i.get=i.getParameterByName,i.remove=i.removeParameter,i.add=i.addParameter,i}),define("zenjs/util/number",[],function(){return{makeRandomString:function(t){var e="",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t=t||10;for(var n=0;n<t;n++)e+=i.charAt(Math.floor(Math.random()*i.length));return e}}}),define("bower_components/pop/pop",["require","zenjs/events","zenjs/util/number"],function(t){var e=function(){},i=t("zenjs/events"),n=t("zenjs/util/number");return window.zenjs=window.zenjs||{},i.extend({init:function(t){this._window=$(window);var i=n.makeRandomString();$("body").append('<div id="'+i+'"                 style="display:none; height: 100%;                 position: fixed; top: 0; left: 0; right: 0;                background-color: rgba(0, 0, 0, '+(t.transparent||".7")+');z-index:1000;opacity:0;transition: opacity ease 0.2s;"></div>'),this.nBg=$("#"+i),this.nBg.on("click",$.proxy(function(){this.isCanNotHide||this.hide()},this));var o=n.makeRandomString();$("body").append('<div id="'+o+'" class="'+(t.className||"")+'" style="overflow:hidden;visibility: hidden;"></div>'),this.nPopContainer=$("#"+o),this.nPopContainer.hide(),this.nPopContainer.css({opacity:0,position:"absolute","z-index":1e3}),t.contentViewClass&&(this.contentViewClass=t.contentViewClass,this.contentViewOptions=$.extend({el:this.nPopContainer},t.contentViewOptions||{}),this.contentView=new this.contentViewClass($.extend({onHide:$.proxy(this.hide,this)},this.contentViewOptions)),this.contentView.onHide=$.proxy(this.hide,this)),this.animationTime=t.animationTime||300,this.isCanNotHide=t.isCanNotHide,this.doNotRemoveOnHide=t.doNotRemoveOnHide||!1,this.onShow=t.onShow||e,this.onHide=t.onHide||e,this.onFinishHide=t.onFinishHide||e,this.html=t.html},render:function(t){return this.renderOptions=t||{},this.contentViewClass?this.contentView.render(this.renderOptions):this.html&&this.nPopContainer.html(this.html),this},show:function(){return this.nBg.show().css({opacity:"1","transition-property":"none"}),this.nPopContainer.show(),this.trigger("pop:show:before"),setTimeout($.proxy(function(){this.trigger("pop:show:after"),this.nPopContainer.show().css("visibility","visible"),this._doShow&&this._doShow(),this.onShow()},this),200),this},hide:function(t){t=t||{};var e=t.doNotRemove||this.doNotRemoveOnHide||!1;this._doHide&&this._doHide(),this.trigger("pop:hide:before"),setTimeout($.proxy(function(){this.nBg.css({opacity:0,"transition-property":"opacity"}),this.trigger("pop:hide:after"),setTimeout($.proxy(function(){this.nBg.hide(),this.nPopContainer.hide(),e||this.destroy()},this),200)},this),this.animationTime),this.onHide()},destroy:function(){return this.nPopContainer.remove(),this.nBg.remove(),this.contentView&&this.contentView.remove(),this}})}),define("bower_components/pop/pop_forbid_scroll",["require","./pop"],function(t){return window.zenjs=window.zenjs||{},t("./pop").extend({init:function(t){this._super(t),t.doNotForbidScroll||(this.on("pop:show:before",$.proxy(this.onBeforePopShow,this)),this.on("pop:show:after",$.proxy(this.onAfterPopShow,this)),this.on("pop:hide:after",$.proxy(this.onAfterPopHide,this)))},onBeforePopShow:function(){this.top=this._window.scrollTop()},onAfterPopShow:function(){this._window.scrollTop(0),this.startShow()},onAfterPopHide:function(){var t,e=function(i){if(t!==this._window.scrollTop()&&i>0)return this._window.scrollTop(t),void setTimeout($.proxy(e,this,i-1));setTimeout($.proxy(this.onFinishHide,this),50)};return function(){this.startHide(),t=this.top,this._window.scrollTop(t),$.proxy(e,this)(2),setTimeout($.proxy(function(){window.zenjs.popList.length<1&&$("html").css("position",this.htmlPosition)},this),200)}}(),startShow:function(){var t=window.zenjs.popList;if(t||(t=window.zenjs.popList=[]),0===t.length){var e=$("body"),i=$("html");this.htmlPosition=i.css("position"),i.css("position","relative"),this.bodyCss=(e.prop("style")||{}).cssText,this.htmlCss=(i.prop("style")||{}).cssText,$("body,html").css({overflow:"hidden",height:this._window.height(),"padding-bottom":0,"margin-bottom":0})}t.indexOf(this)<0&&t.push(this)},startHide:function(){var t=window.zenjs.popList,e=t.indexOf(this);e>-1&&t.splice(e,1),t.length<1&&($("html").attr("style",this.htmlCss||""),$("body").attr("style",this.bodyCss||""))}})}),define("bower_components/pop/popout",["require","./pop_forbid_scroll"],function(t){return t("./pop_forbid_scroll").extend({init:function(t){t=t||{},this._super(t),this.css=$.extend({transition:"opacity ease "+this.animationTime+"ms",top:"50%",left:"50%","-webkit-transform":"translate3d(-50%, -50%, 0)",transform:"translateY(-50%, -50%, 0)"},t.css||{}),this.nPopContainer.css(this.css)},_doShow:function(){$(".js-popout-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.css("opacity",1),this.nPopContainer.show()},_doHide:function(t){this.nPopContainer.css({opacity:0})}})}),define("bower_components/pop/popout_box",["require","./popout"],function(t){var e=function(){};return t("./popout").extend({init:function(t){this._super(t),this._onOKClicked=t.onOKClicked||e,this._onCancelClicked=t.onCancelClicked||e,this.preventHideOnOkClicked=t.preventHideOnOkClicked||!1,this.width=t.width,this.setEventListener()},setEventListener:function(){this.nPopContainer.on("click",".js-ok",$.proxy(this.onOKClicked,this)),this.nPopContainer.on("click",".js-cancel",$.proxy(this.onCancelClicked,this))},_doShow:function(){this.boxCss={"border-radius":"4px",background:"white",width:this.width||"270px",padding:"15px"},this.nPopContainer.css(this.boxCss).addClass("popout-box"),this._super()},_doHide:function(t){this._super()},onOKClicked:function(t){this._onOKClicked(t),!this.preventHideOnOkClicked&&this.hide()},onCancelClicked:function(t){this._onCancelClicked(t),this.hide()}})}),define("text!bower_components/pop/pop_confirm/box.html",[],function(){return'<% if (title) { %>\n<h1 class="center font-size-16"><%= title %></h1>\n<% } %>\n<div class="confirm-content font-size-14<% if (title) { %> c-gray-dark<% } %>" style="line-height: 20px; padding: 5px 5px 10px;">\n    <%= content %>\n</div>\n<hr style="margin: 9px -15px 10px;" />\n<div class="btn-2-1">\n    <p class="js-cancel center font-size-16" style="padding-top: 5px;"><%= cancelBtn %></p>\n</div><div class="btn-2-1">\n    <p class="js-ok center c-green font-size-16" style="padding-top: 5px;"><%= okBtn %></p>\n</div>'}),define("zenjs/util/template",["require","jquery"],function(t){var e=t("jquery"),i=function(){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},e=["&","<",">",'"',"'"],i=new RegExp("["+e.join("")+"]","g");return function(e){return null==e?"":(""+e).replace(i,function(e){return t[e]})}}(),n={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},o={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"};return function(t,s,r){var c;r=e.extend({},n,r);var a=new RegExp([(r.escape||/(.)^/).source,(r.interpolate||/(.)^/).source,(r.evaluate||/(.)^/).source].join("|")+"|$","g"),h=0,p="__p+='";t.replace(a,function(e,i,n,s,r){return p+=t.slice(h,r).replace(/\\|'|\r|\n|\t|\u2028|\u2029/g,function(t){return"\\"+o[t]}),i&&(p+="'+\n((__t=("+i+"))==null?'':escapeFunc(__t))+\n'"),n&&(p+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),s&&(p+="';\n"+s+"\n__p+='"),h=r+e.length,e}),p+="';\n",r.variable||(p="with(obj||{}){\n"+p+"}\n"),p="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+p+"return __p;\n";try{c=new Function(r.variable||"obj","escapeFunc",p)}catch(t){throw t.source=p,t}if(s)return c(s,i);var l=function(t){return c.call(this,t,i)};return l.source="function("+(r.variable||"obj")+"){\n"+p+"}",l}}),define("bower_components/pop/pop_confirm/popout_confirm",["require","../popout_box","text!../pop_confirm/box.html","zenjs/util/template"],function(t){var e=t("../popout_box"),i=t("text!../pop_confirm/box.html"),n=t("zenjs/util/template"),o=n(i),s=e.extend({init:function(t){this._super(t),this.isCanNotHide=!0,this.title=t.title||"",this.content=t.content||"",this.okBtn=t.okBtn||"确定",this.cancelBtn=t.cancelBtn||"取消"},render:function(t){return this.html||(this.html=o({title:this.title,content:this.content,okBtn:this.okBtn,cancelBtn:this.cancelBtn})),this._super(t),this.nPopContainer.addClass("popout-confirm"),this}}),r=null;return{show:function(t,e){e=e||{},r&&this.hide(),e.content=t,r=new s(e).render().show()},hide:function(){r&&(r.hide(),r=null)}}}),define("bower_components/pop/popup",["require","./pop_forbid_scroll"],function(t){return t("./pop_forbid_scroll").extend({init:function(t){this._super(t),this.onClickBg=t.onClickBg||function(){},this.onBeforePopupShow=t.onBeforePopupShow||function(){},this.onAfterPopupHide=t.onAfterPopupHide||function(){},this.nPopContainer.css($.extend({left:0,right:0,bottom:0,background:"white"},t.containerCss||{})),this.nPopContainer.css("opacity","0"),this.nPopContainer.on("focus","input, textarea",function(t){var e=$(this),i=$(window),n=i.scrollTop(),o=e.offset().top;(o-n<0||o-n>100)&&setTimeout(function(){var t=o-70;i.scrollTop(t)},400)})},_doShow:function(){this.nPopContainer.addClass("popup"),this.contentView&&this.contentView.height?this.height=this.contentView.height():this.contentView||(this.height=this.nPopContainer.height()),this.onBeforePopupShow(),$(".js-close").click($.proxy(function(t){this.hide()},this)),this.nPopContainer.css({height:this.height+"px",transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)"}),this.bodyPadding=$("body").css("padding"),$("body").css("padding","0px"),setTimeout($.proxy(function(){this.nPopContainer.css({transform:"translate3d(0,0,0)","-webkit-transform":"translate3d(0,0,0)","-webkit-transition":"all ease "+this.animationTime+"ms",transition:"all ease "+this.animationTime+"ms",opacity:1})},this)),setTimeout($.proxy(function(){this.contentView&&this.contentView.onAfterPopupShow&&this.contentView.onAfterPopupShow()},this),this.animationTime)},_doHide:function(t){this.nPopContainer.css({transform:"translate3d(0,100%,0)","-webkit-transform":"translate3d(0,100%,0)",opacity:0}),setTimeout($.proxy(function(){$("body").css("padding",this.bodyPadding),this.onAfterPopupHide()},this),this.animationTime)}})}),define("text!wap/buyer/login_with_code/templates/showImage.html",[],function(){return'<ul class="wrapper-form image-code-pop">\n  <li class="form-item">\n    <input id="image-code" type="text" class="js-image-code-input" placeholder="请输入图形验证码" />\n    <img src="<%= image_url %>" class="image-code js-image-src">\n  </li>\n</ul>'}),require(["bower_components/ZanUtil/src/args","bower_components/pop/pop_confirm/popout_confirm","bower_components/pop/popup","bower_components/pop/popout_box","text!wap/buyer/login_with_code/templates/showImage.html"],function(t,e,i,n,o){new(Backbone.View.extend({events:{"click .gc-qrcode-btn":"getToken","click .gc-button-link":"switchSubmit","click .login-with-pwd":"changePage","click .login-with-code":"changePage","focus .phone-num-value":"removeErr","focus .pwd-num-value":"checkPhone"},initialize:function(){this.isLock=!0;var t=_global.url.www.replace(/^https?:\/\//,"//"),e=_global.url.uic.replace(/^https?:\/\//,"//");this.smsFetchUrl=t+"/common/sms/captcha.jsonp",this.imgUrl=t+"/common/sms/imgcaptcha",this.imgVerifyUrl=t+"/common/sms/imgcaptcha.jsonp",this.pwdSubmitUrl=e+"/buyer/auth/authlogin.json",this.submitUrl=e+"/sso/wap/code/login",this.checkPhoneUrl=e+"/buyer/auth/authConfirm.json",this.token="",this.loginShadow=$("#login-shadow-wrap"),this.page=1,this.timer=null,this.getCodeBtn=$(".gc-qrcode-btn"),this.isCheck=!1,this.title=document.title},changePage:function(){1==this.page?($(".page1").hide(),$(".page2").show(),document.title="密码登录",this.page=2):($(".page1").show(),$(".page2").hide(),document.title=this.title,this.page=1)},validate:function(t){return/^1[0-9]{10}$/.test(t)},removeErr:function(){$(".gc-input-phone").removeClass("err"),$(".reset-pwd").attr("href","javascript:void(0);")},checkPhone:function(){var t=$(".phone-num-value").val(),e=this,i=$(".gc-input-phone");if(!this.validate(t))return motify.log("请输入正确的手机号格式"),void i.addClass("err");$._ajax({url:this.checkPhoneUrl,type:"POST",dataType:"json",timeout:15e3,data:{phone:t,source:2,showBindText:!1},xhrFields:{withCredentials:!0},success:function(t){0==t.code?e.check=!0:(motify.log(t.msg),i.addClass("err"))},error:function(t,e,n){motify.log("手机号验证失败"),i.addClass("err")},complete:function(t,e){}})},getToken:function(){var t=this;this.isLock&&$._ajax({url:window._global.url.www.replace(/^https?:\/\//,"//")+"/common/token/token.jsonp",type:"get",dataType:"jsonp"}).done(function(e){0==e.code?(t.token=e.data,t.fetchQrCode()):motify.log("请检查你的网络")}).fail(function(){motify.log("请检查你的网络")})},fetchQrCode:function(){var t=$(".phone-num-value").val(),e=this;if(!this.validate(t))return void motify.log("请输入正确的手机号格式");this.isLock&&$._ajax({url:this.smsFetchUrl,dataType:"jsonp",data:{mobile:t,token:this.token,verifyTimes:1,biz:"uic_login_without_password",platform:"wap",sub_from:"wsc"},success:function(t){0==t.code?e.changTime():10111==t.code?e.handlePop():motify.log(t.msg)},error:function(){motify.log("获取失败，请稍后再试")}})},switchSubmit:function(){1==this.page?this.handleSubmit():this.handleSubmitPwd()},handleSubmit:function(){var t=$(".phone-num-value").val(),e=$(".code-num-value").val();if(!this.validate(t))return void motify.log("请输入正确的手机号格式");this.validate(t)&&$._ajax({url:this.submitUrl,type:"POST",dataType:"json",timeout:15e3,data:{mobile:t,verify_code:e,source:2},xhrFields:{withCredentials:!0},success:function(t){0==t.code?window.location.href=window._global.redirect_url:motify.log(t.msg)},error:function(t,e,i){motify.log("提交失败，请稍后再试")},complete:function(t,e){}})},changTime:function(){clearInterval(this.timer);var t=$(".gc-qrcode-btn"),e=59;t.removeClass("lock"),t.html("获取验证码");var i=this;this.isLock&&(this.isLock=!1,t.addClass("lock"),t.html("等待 "+e+"秒"),this.timer=setInterval(function(){e--,t.html("等待 "+e+"秒"),e<=0&&(clearInterval(i.timer),i.isLock=!0,t.html("再次获取"),t.removeClass("lock"))},1e3))},handlePop:function(){var i=this;e.show(_.template(o)({image_url:t.add(this.imgUrl,{stamp:new Date})}),{title:"图形验证码",isCanNotHide:!0,doNotRemoveOnHide:!1,onOKClicked:function(){$._ajax({url:"/v2/common/sms/imgcaptcha.json",type:"POST",data:{phone:$(".phone-num-value").val(),captcha_code:$(".js-image-code-input").val()},success:function(t){0==t.code?motify.log("验证成功"):motify.log(t.msg||"网络错误")},error:function(){motify.log("信息提交失败，请稍后再试")},complete:function(){e.hide(),i.resetGetSmsBtnState()}})},onCancelClicked:function(){i.resetGetSmsBtnState()}})},resetGetSmsBtnState:function(){this.timer&&(clearInterval(this.timer),$(".gc-qrcode-btn").removeClass("lock"),this.timer=null,this.isLock=!0),this.getCodeBtn.prop("disabled",!1).text("再次获取")},handleSubmitPwd:function(){function t(){$._ajax({url:n.pwdSubmitUrl,type:"post",data:{phone:e,password:i},xhrFields:{withCredentials:!0},success:function(t){0==t.code?window.location.href=window._global.redirect_url:motify.log(t.msg)},error:function(t,e,i){motify.log("登录失败，请稍后再试")},complete:function(t,e){}})}var e=$(".phone-num-value").val(),i=$(".pwd-num-value").val(),n=this,o=$(".gc-input-phone");if(!this.validate(e))return void motify.log("请输入正确的手机号格式");this.validate(e)&&$._ajax({url:this.checkPhoneUrl,type:"POST",dataType:"json",timeout:15e3,data:{phone:e,source:2,showBindText:!1},xhrFields:{withCredentials:!0},success:function(e){0==e.code?(n.check=!0,t()):(motify.log(e.msg),o.addClass("err"))},error:function(t,e,i){motify.log("验证手机失败")},complete:function(t,e){}})}}))({el:$("body")})}),define("main",function(){});